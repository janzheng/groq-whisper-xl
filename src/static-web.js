// Embedded static files for the web interface
// This file is auto-generated by scripts/build-static.js - do not edit manually!

export const STATIC_FILES = {
  '/': `<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Groq Whisper XL - Audio Transcription</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'terminal-bg': '#fff8eb',
              'terminal-bg-light': '#ffffff',
              'terminal-text': '#27231f',
              'terminal-text-dim': '#6b6356',
              'terminal-accent': '#27231f',
              'terminal-border': '#432f0d',
              'status-success': '#16a34a',
              'status-error': '#dc2626',
              'status-warning': '#d97706',
              'status-info': '#2563eb',
            }
          }
        }
      }
    </script>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
      }
      
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }
      
      .animate-pulse-slow {
        animation: pulse 2s infinite;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      .animate-fade-in {
        animation: fadeIn 0.3s ease-in;
      }
      
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      
      .animate-spin {
        animation: spin 1s linear infinite;
      }
    </style>
    <script type="module" src="/assets/app.js"></script>
  </head>
  <body class="bg-terminal-bg text-terminal-text overflow-x-hidden">
    <div id="app"></div>
  </body>
</html> `,
  
  '/assets/app.js': `var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t){for(const e of n)e(void 0);return e}const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(e){let t;return s(e,e=>t=e)(),t}function c(e,t,n){e.$$.on_destroy.push(s(t,n))}function a(e,t,n){return e.set(n),t}function d(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function b(){return p(" ")}function g(){return p("")}function h(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e,t,n){const r=t.toLowerCase();r in e?e[r]="boolean"==typeof e[r]&&""===n||n:t in e?e[t]="boolean"==typeof e[t]&&""===n||n:x(e,t,n)}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function v(e,t){e.value=null==t?"":t}function w(e,t,n,r){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function $(e,t,n){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function j(e){const t=e.querySelector(":checked");return t&&t.__value}function k(e,t,n){e.classList.toggle(t,!!n)}let S;function T(e){S=e}function C(){if(!S)throw new Error("Function called outside component initialization");return S}function L(e){C().$$.on_mount.push(e)}function M(){const e=C();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(t,n,{cancelable:r});return i.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}const E=[],A=[];let D=[];const F=[],O=Promise.resolve();let z=!1;function P(e){D.push(e)}const N=new Set;let R=0;function I(){if(0!==R)return;const e=S;do{try{for(;R<E.length;){const e=E[R];R++,T(e),B(e.$$)}}catch(e){throw E.length=0,R=0,e}for(T(null),E.length=0,R=0;A.length;)A.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];N.has(t)||(N.add(t),t())}D.length=0}while(E.length);for(;F.length;)F.pop()();z=!1,N.clear(),T(e)}function B(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const J=new Set;let U;function W(){U={r:0,c:[],p:U}}function G(){U.r||r(U.c),U=U.p}function H(e,t){e&&e.i&&(J.delete(e),e.i(t))}function q(e,t,n,r){if(e&&e.o){if(J.has(e))return;J.add(e),U.c.push(()=>{J.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function V(e){return void 0!==e?.length?e:Array.from(e)}function K(e,t){q(e,1,1,()=>{t.delete(e.key)})}function X(e){e&&e.c()}function Q(e,n,o){const{fragment:s,after_update:l}=e.$$;s&&s.m(n,o),P(()=>{const n=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...n):r(n),e.$$.on_mount=[]}),l.forEach(P)}function Y(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];D.forEach(r=>-1===e.indexOf(r)?t.push(r):n.push(r)),n.forEach(e=>e()),D=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(E.push(e),z||(z=!0,O.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(t,i,o,s,l,c,a=null,d=[-1]){const u=S;T(t);const f=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(u?u.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:i.target||u.$$.root};a&&a(f.root);let p=!1;if(f.ctx=o?o(t,i.props||{},(e,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),p&&Z(t,e)),n}):[],f.update(),p=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);f.fragment&&f.fragment.l(e),e.forEach(m)}else f.fragment&&f.fragment.c();i.intro&&H(t.$$.fragment),Q(t,i.target,i.anchor),I()}T(u)}class te{$$=void 0;$$set=void 0;$destroy(){Y(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ne(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="flex items-center gap-2 text-lg font-bold"><iconify-icon icon="mdi:lightning-bolt" class="text-terminal-accent"></iconify-icon> <span class="text-terminal-accent">Groq Whisper XL</span></div> <div class="text-terminal-text-dim mt-2">Fast, accurate audio transcription powered by Groq&#39;s Whisper API with intelligent chunking and LLM enhancement.</div> <div class="mt-3"><div class="space-y-1 text-sm"><div class="flex items-center gap-2 text-terminal-text-dim"><iconify-icon icon="mdi:file-music" class="text-xs"></iconify-icon> <span>Universal file support up to 1GB with smart processing</span></div> <div class="flex items-center gap-2 text-terminal-text-dim"><iconify-icon icon="mdi:brain" class="text-xs"></iconify-icon> <span>AI-powered error correction for improved accuracy</span></div> <div class="flex items-center gap-2 text-terminal-text-dim"><iconify-icon icon="mdi:play-speed" class="text-xs"></iconify-icon> <span>Real-time streaming transcription with live results</span></div></div></div>',x(n,"class","border-2 border-terminal-border bg-terminal-bg-light p-4 mb-4")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class re extends te{constructor(e){super(),ee(this,e,null,ne,o,{})}}const ie=[];function oe(t,n=e){let r;const i=new Set;function s(e){if(o(t,e)&&(t=e,r)){const e=!ie.length;for(const e of i)e[1](),ie.push(e,t);if(e){for(let e=0;e<ie.length;e+=2)ie[e][0](ie[e+1]);ie.length=0}}}function l(e){s(e(t))}return{set:s,update:l,subscribe:function(o,c=e){const a=[o,c];return i.add(a),1===i.size&&(r=n(s,l)||e),o(t),()=>{i.delete(a),0===i.size&&r&&(r(),r=null)}}}}class se{static levels={DEBUG:0,INFO:1,WARN:2,ERROR:3};static emojis={start:"üöÄ",processing:"üîÑ",complete:"‚úÖ",failed:"‚ùå",upload:"üì§",download:"üì•",file:"üìÅ",delete:"üóëÔ∏è",audio:"üéµ",transcribe:"üé§",chunk:"üß©",stream:"üåä",llm:"üß†",api:"üì°",webhook:"üîó",url:"üåê",info:"‚ÑπÔ∏è",warning:"‚ö†Ô∏è",error:"‚ùå",debug:"üîç",stats:"üìä",time:"‚è±Ô∏è",progress:"üìà"};constructor(e="WEB",t=se.levels.INFO){this.context=e,this.level=t}_formatMessage(e,t,n=null){(new Date).toLocaleTimeString();const r=\`\${e} [\${this.context}]\`;return n&&Object.keys(n).length,\`\${r} \${t}\`}debug(e,t=null){if(this.level<=se.levels.DEBUG){const n=this._formatMessage(se.emojis.debug,e,t);console.log(n,t)}}info(e,t,n=null){if(this.level<=se.levels.INFO){const r=se.emojis[e]||e,i=this._formatMessage(r,t,n);console.log(i,n)}}warn(e,t=null){if(this.level<=se.levels.WARN){const n=this._formatMessage(se.emojis.warning,e,t);console.warn(n,t)}}error(e,t=null,n=null){if(this.level<=se.levels.ERROR){const r=this._formatMessage(se.emojis.error,e,n);console.error(r,t,n)}}upload(e,t=null){this.info("upload",e,t)}download(e,t=null){this.info("download",e,t)}processing(e,t=null){this.info("processing",e,t)}complete(e,t=null){this.info("complete",e,t)}chunk(e,t=null){this.info("chunk",e,t)}transcribe(e,t=null){this.info("transcribe",e,t)}llm(e,t=null){this.info("llm",e,t)}api(e,t=null){this.info("api",e,t)}stats(e,t=null){this.info("stats",e,t)}stream(e,t=null){this.info("stream",e,t)}}const le=new se("WEB",se.levels.INFO),ce=new se("STREAM",se.levels.INFO),ae=oe([]),de=oe(!1),ue=oe(!1),me=oe(!1),fe=oe(""),pe=oe(Date.now()),be=oe(0),ge=oe(""),he=oe(0),xe=oe(0),_e=oe(""),ye=oe("disabled");function ve(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}async function we(){try{console.log("=== FETCH JOBS CALLED ===");const e=l(ae);console.log("Jobs before fetch:",e.length,e.map(e=>({id:e.job_id.slice(0,8)+"...",method:e.processing_method})));const t=await fetch("/jobs");if(t.ok){const n=(await t.json()).jobs||[];console.log("Server returned jobs:",n.length,n.map(e=>({id:e.job_id.slice(0,8)+"...",method:e.processing_method||"direct"})));const r=new Set(e.map(e=>e.job_id)),i=n.filter(e=>!r.has(e.job_id));console.log("New server jobs to add:",i.length,i.map(e=>({id:e.job_id.slice(0,8)+"...",method:e.processing_method||"direct"})));const o=[];for(const t of e){const e=n.find(e=>e.job_id===t.job_id);e?o.push({...t,...e,..."streaming"===t.processing_method?{raw_transcript:t.raw_transcript||e.raw_transcript,corrected_transcript:t.corrected_transcript||e.corrected_transcript,final_transcript:t.final_transcript||e.final_transcript,transcripts:t.transcripts||e.transcripts||[]}:{}}):o.push(t)}const s=[...o,...i],l=[],c=new Set;for(const e of s)c.has(e.job_id)||(c.add(e.job_id),l.push(e));ae.set(l),console.log("Jobs after fetch and deduplication:",l.length,l.map(e=>({id:e.job_id.slice(0,8)+"...",method:e.processing_method}))),le.info("api","Fetched jobs",{server_jobs:n.length,new_server_jobs:i.length,local_jobs_preserved:e.length,total:l.length,duplicates_removed:s.length-l.length})}}catch(e){console.error("Fetch jobs error:",e),le.error("Failed to fetch jobs",e)}}function $e(e){let t,n,r;return{c(){t=f("input"),x(t,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),x(t,"type","url"),x(t,"placeholder","https://example.com/audio.mp3")},m(i,o){u(i,t,o),v(t,e[1]),n||(r=h(t,"input",e[20]),n=!0)},p(e,n){2&n&&t.value!==e[1]&&v(t,e[1])},d(e){e&&m(t),n=!1,r()}}}function je(e){let t,n,i,o,s,l,c,a,g,v,w,$,j,S,T=e[6].title+"",C=e[6].subtitle+"",L=e[6].description&&ke(e);return{c(){t=f("div"),n=f("iconify-icon"),o=b(),s=f("div"),l=p(T),c=b(),a=f("div"),g=p(C),v=b(),L&&L.c(),w=b(),$=f("input"),_(n,"icon",i=e[6].icon),_(n,"class","text-3xl mb-2"),k(n,"text-terminal-text-dim",!e[6].success&&!e[6].error),k(n,"text-terminal-accent","mdi:file-music"===e[6].icon),k(n,"animate-spin","mdi:loading"===e[6].icon),x(s,"class","font-bold"),x(a,"class","text-xs"),k(a,"text-terminal-text-dim",!e[6].success&&!e[6].error),k(a,"text-terminal-accent","mdi:file-music"===e[6].icon),x(t,"role","button"),x(t,"tabindex","0"),x(t,"class","border-2 border-dashed border-terminal-border p-6 text-center cursor-pointer transition-all hover:border-terminal-accent hover:bg-gray-900/20"),k(t,"text-status-success",e[6].success),k(t,"text-status-error",e[6].error),x($,"type","file"),x($,"accept","audio/*,video/*"),x($,"class","hidden")},m(r,i){u(r,t,i),d(t,n),d(t,o),d(t,s),d(s,l),d(t,c),d(t,a),d(a,g),d(t,v),L&&L.m(t,null),e[17](t),u(r,w,i),u(r,$,i),e[19]($),j||(S=[h(t,"click",e[12]),h(t,"keydown",e[18]),h(t,"dragover",e[8]),h(t,"dragleave",e[9]),h(t,"drop",e[10]),h($,"change",e[11])],j=!0)},p(e,r){64&r&&i!==(i=e[6].icon)&&_(n,"icon",i),64&r&&k(n,"text-terminal-text-dim",!e[6].success&&!e[6].error),64&r&&k(n,"text-terminal-accent","mdi:file-music"===e[6].icon),64&r&&k(n,"animate-spin","mdi:loading"===e[6].icon),64&r&&T!==(T=e[6].title+"")&&y(l,T),64&r&&C!==(C=e[6].subtitle+"")&&y(g,C),64&r&&k(a,"text-terminal-text-dim",!e[6].success&&!e[6].error),64&r&&k(a,"text-terminal-accent","mdi:file-music"===e[6].icon),e[6].description?L?L.p(e,r):(L=ke(e),L.c(),L.m(t,null)):L&&(L.d(1),L=null),64&r&&k(t,"text-status-success",e[6].success),64&r&&k(t,"text-status-error",e[6].error)},d(n){n&&(m(t),m(w),m($)),L&&L.d(),e[17](null),e[19](null),j=!1,r(S)}}}function ke(e){let t,n,r=e[6].description+"";return{c(){t=f("div"),n=p(r),x(t,"class","text-xs text-terminal-text-dim")},m(e,r){u(e,t,r),d(t,n)},p(e,t){64&t&&r!==(r=e[6].description+"")&&y(n,r)},d(e){e&&m(t)}}}function Se(e){let t;return{c(){t=p("Transcribe Audio")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Te(e){let t;return{c(){t=p("Processing...")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Ce(t){let n,i,o,s,l,c,a,p,g,y,w,$,j,S,T,C,L,M,E,A,D,F,O,z,P,N,R,I,B,J,U,W,G,H,q,V,K,X;function Q(e,t){return"file"===e[0]?je:$e}let Y=Q(t),Z=Y(t);function ee(e,t){return e[7]?Te:Se}let te=ee(t),ne=te(t);return{c(){n=f("div"),i=f("div"),i.innerHTML='<iconify-icon icon="mdi:microphone" class="text-lg"></iconify-icon> <span>Direct Transcription</span>',o=b(),s=f("div"),s.textContent="Upload files or URLs for complete transcription. Results available when processing is done.",l=b(),c=f("div"),a=f("div"),a.textContent="Source:",p=b(),g=f("div"),y=f("button"),y.innerHTML='<iconify-icon icon="mdi:file-outline"></iconify-icon> File',w=b(),$=f("button"),$.innerHTML='<iconify-icon icon="mdi:web"></iconify-icon> URL',j=b(),Z.c(),S=b(),T=f("div"),C=f("div"),C.textContent="Settings:",L=b(),M=f("div"),E=f("div"),A=f("label"),D=f("input"),F=b(),O=f("iconify-icon"),z=b(),P=f("span"),P.textContent="LLM Error Correction",N=b(),R=f("span"),R.textContent="(Improves accuracy)",I=b(),B=f("div"),J=f("label"),J.textContent="Webhook URL (optional):",U=b(),W=f("input"),G=b(),H=f("button"),q=f("iconify-icon"),V=b(),ne.c(),x(i,"class","flex items-center gap-2 mb-4 font-bold text-terminal-accent"),x(s,"class","text-xs text-terminal-text-dim mb-4"),x(a,"class","font-bold mb-2"),x(y,"class","border border-terminal-border text-terminal-text px-4 py-2 hover:bg-yellow-400 transition-colors flex-1 flex items-center justify-center gap-2"),k(y,"bg-yellow-400","file"===t[0]),k(y,"bg-terminal-bg","file"!==t[0]),x($,"class","border border-terminal-border text-terminal-text px-4 py-2 hover:bg-yellow-400 transition-colors flex-1 flex items-center justify-center gap-2"),k($,"bg-yellow-400","url"===t[0]),k($,"bg-terminal-bg","url"!==t[0]),x(g,"class","flex gap-2 mb-3"),x(c,"class","mb-4"),x(C,"class","font-bold mb-2"),x(D,"type","checkbox"),x(D,"class","w-4 h-4"),_(O,"icon","mdi:brain"),_(O,"class","text-terminal-accent"),x(P,"class","text-terminal-accent"),x(R,"class","text-terminal-text-dim"),x(A,"class","flex items-center gap-2 cursor-pointer"),x(J,"for","webhook-url"),x(J,"class","text-terminal-text-dim block mb-1"),x(W,"id","webhook-url"),x(W,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),x(W,"type","url"),x(W,"placeholder","https://your-webhook.com/endpoint"),x(M,"class","space-y-3"),x(T,"class","mb-4 flex-1"),_(q,"icon","mdi:microphone"),H.disabled=t[7],x(H,"class","bg-terminal-accent text-terminal-bg px-4 py-2 hover:bg-gray-700 transition-colors w-full font-bold flex items-center justify-center gap-2"),k(H,"opacity-50",t[7]),x(n,"class","border border-terminal-border p-4 flex flex-col")},m(e,r){u(e,n,r),d(n,i),d(n,o),d(n,s),d(n,l),d(n,c),d(c,a),d(c,p),d(c,g),d(g,y),d(g,w),d(g,$),d(c,j),Z.m(c,null),d(n,S),d(n,T),d(T,C),d(T,L),d(T,M),d(M,E),d(E,A),d(A,D),D.checked=t[2],d(A,F),d(A,O),d(A,z),d(A,P),d(A,N),d(A,R),d(M,I),d(M,B),d(B,J),d(B,U),d(B,W),v(W,t[3]),d(n,G),d(n,H),d(H,q),d(H,V),ne.m(H,null),K||(X=[h(y,"click",t[15]),h($,"click",t[16]),h(D,"change",t[21]),h(W,"input",t[22]),h(H,"click",t[13])],K=!0)},p(e,[t]){1&t&&k(y,"bg-yellow-400","file"===e[0]),1&t&&k(y,"bg-terminal-bg","file"!==e[0]),1&t&&k($,"bg-yellow-400","url"===e[0]),1&t&&k($,"bg-terminal-bg","url"!==e[0]),Y===(Y=Q(e))&&Z?Z.p(e,t):(Z.d(1),Z=Y(e),Z&&(Z.c(),Z.m(c,null))),4&t&&(D.checked=e[2]),8&t&&W.value!==e[3]&&v(W,e[3]),te!==(te=ee(e))&&(ne.d(1),ne=te(e),ne&&(ne.c(),ne.m(H,null))),128&t&&(H.disabled=e[7]),128&t&&k(H,"opacity-50",e[7])},i:e,o:e,d(e){e&&m(n),Z.d(),ne.d(),K=!1,r(X)}}}function Le(e,t,n){let r;c(e,de,e=>n(7,r=e));let i,o,s="file",d=null,u="",m=!1,f="",p={icon:"mdi:file-plus",title:"Drop files here or click to browse",subtitle:"MP3, WAV, M4A, FLAC, etc. (up to 1GB)"};function b(e){n(6,p={icon:"mdi:file-music",title:e.name,subtitle:\`Ready to transcribe (\${ve(e.size)})\`,description:'Click "Transcribe Audio" to start'}),d=e}function g(){n(6,p={icon:"mdi:file-plus",title:"Drop files here or click to browse",subtitle:"MP3, WAV, M4A, FLAC, etc. (up to 1GB)"}),d=null,o&&n(5,o.value="",o)}function h(){i&&(i.classList.remove("border-terminal-accent","bg-green-900/20"),i.classList.add("border-terminal-border"))}function x(){o&&o.click()}function _(e){n(0,s=e),g(),n(1,u="")}return[s,u,m,f,i,o,p,r,function(e){e.preventDefault(),i&&(i.classList.add("border-terminal-accent","bg-green-900/20"),i.classList.remove("border-terminal-border"))},h,function(e){e.preventDefault(),h();const t=Array.from(e.dataTransfer.files);t.length>0&&b(t[0])},function(e){const t=Array.from(e.target.files);t.length>0&&b(t[0])},x,async function(){if(!r)if("file"===s)if(d)try{a(de,r=!0,r),n(6,p={icon:"mdi:upload",title:\`Uploading \${d.name}...\`,subtitle:\`\${ve(d.size)} - Please wait\`}),await new Promise(e=>setTimeout(e,300)),n(6,p={icon:"mdi:loading",title:\`Processing \${d.name}...\`,subtitle:"Transcribing audio with Groq Whisper"}),await async function(e,t,n){const r=new FormData;r.append("file",e),r.append("use_llm",t.toString()),n&&r.append("webhook_url",n);const i=await fetch("/upload",{method:"POST",body:r});if(i.ok){const e=await i.json(),n=l(ae),r={job_id:e.job_id,filename:e.filename,status:"processing",file_size:e.file_size,processing_method:e.processing_method,upload_method:"direct",use_llm:t,created_at:(new Date).toISOString()};return ae.set([r,...n]),e}{const e=await i.json();throw new Error(e.error||"Upload failed")}}(d,m,f||null),n(6,p={icon:"mdi:check",title:\`\${d.name} uploaded successfully!\`,subtitle:'Check "Jobs" section for progress',success:!0}),setTimeout(()=>{g()},3e3)}catch(e){n(6,p={icon:"mdi:alert-circle",title:"Upload failed",subtitle:e.message,error:!0}),setTimeout(()=>{g()},3e3)}finally{a(de,r=!1,r)}else x();else if("url"===s)if(u.trim())try{a(de,r=!0,r),await async function(e,t,n){const r={url:e,use_llm:t};n&&(r.webhook_url=n);const i=await fetch("/upload-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(i.ok){const e=await i.json(),n=l(ae),r={job_id:e.job_id,filename:e.filename,status:"processing",file_size:e.file_size,processing_method:e.processing_method,upload_method:"url",source_url:e.source_url,use_llm:t,created_at:(new Date).toISOString()};return ae.set([r,...n]),e}{const e=await i.json();throw new Error(e.error||"URL upload failed")}}(u.trim(),m,f||null),n(1,u="")}catch(e){alert("Upload failed: "+e.message)}finally{a(de,r=!1,r)}else alert("Please enter an audio URL first")},_,()=>_("file"),()=>_("url"),function(e){A[e?"unshift":"push"](()=>{i=e,n(4,i)})},e=>"Enter"===e.key&&x(),function(e){A[e?"unshift":"push"](()=>{o=e,n(5,o)})},function(){u=this.value,n(1,u)},function(){m=this.checked,n(2,m)},function(){f=this.value,n(3,f)}]}class Me extends te{constructor(e){super(),ee(this,e,Le,Ce,o,{})}}function Ee(e){let t,n,r;return{c(){t=f("input"),t.disabled=e[7],x(t,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),x(t,"type","url"),x(t,"placeholder","https://example.com/audio.mp3"),k(t,"opacity-50",e[7])},m(i,o){u(i,t,o),v(t,e[1]),n||(r=h(t,"input",e[22]),n=!0)},p(e,n){128&n[0]&&(t.disabled=e[7]),2&n[0]&&t.value!==e[1]&&v(t,e[1]),128&n[0]&&k(t,"opacity-50",e[7])},d(e){e&&m(t),n=!1,r()}}}function Ae(e){let t,n,i,o,s,l,c,a,g,v,w,$,j,S,T=e[6].title+"",C=e[6].subtitle+"",L=e[6].description&&De(e);return{c(){t=f("div"),n=f("iconify-icon"),o=b(),s=f("div"),l=p(T),c=b(),a=f("div"),g=p(C),v=b(),L&&L.c(),w=b(),$=f("input"),_(n,"icon",i=e[6].icon),_(n,"class","text-3xl mb-2"),k(n,"text-terminal-text-dim",!e[6].success&&!e[6].error),k(n,"text-terminal-accent","mdi:file-music"===e[6].icon),k(n,"animate-spin","mdi:loading"===e[6].icon),x(s,"class","font-bold"),x(a,"class","text-xs"),k(a,"text-terminal-text-dim",!e[6].success&&!e[6].error),k(a,"text-terminal-accent","mdi:file-music"===e[6].icon),x(t,"role","button"),x(t,"tabindex","0"),x(t,"class","border-2 border-dashed border-terminal-border p-6 text-center cursor-pointer transition-all hover:border-terminal-accent hover:bg-gray-900/20"),k(t,"pointer-events-none",e[7]),k(t,"opacity-50",e[7]),x($,"type","file"),x($,"accept","audio/*,video/*"),x($,"class","hidden"),$.disabled=e[7]},m(r,i){u(r,t,i),d(t,n),d(t,o),d(t,s),d(s,l),d(t,c),d(t,a),d(a,g),d(t,v),L&&L.m(t,null),e[19](t),u(r,w,i),u(r,$,i),e[21]($),j||(S=[h(t,"click",e[12]),h(t,"keydown",e[20]),h(t,"dragover",e[8]),h(t,"dragleave",e[9]),h(t,"drop",e[10]),h($,"change",e[11])],j=!0)},p(e,r){64&r[0]&&i!==(i=e[6].icon)&&_(n,"icon",i),64&r[0]&&k(n,"text-terminal-text-dim",!e[6].success&&!e[6].error),64&r[0]&&k(n,"text-terminal-accent","mdi:file-music"===e[6].icon),64&r[0]&&k(n,"animate-spin","mdi:loading"===e[6].icon),64&r[0]&&T!==(T=e[6].title+"")&&y(l,T),64&r[0]&&C!==(C=e[6].subtitle+"")&&y(g,C),64&r[0]&&k(a,"text-terminal-text-dim",!e[6].success&&!e[6].error),64&r[0]&&k(a,"text-terminal-accent","mdi:file-music"===e[6].icon),e[6].description?L?L.p(e,r):(L=De(e),L.c(),L.m(t,null)):L&&(L.d(1),L=null),128&r[0]&&k(t,"pointer-events-none",e[7]),128&r[0]&&k(t,"opacity-50",e[7]),128&r[0]&&($.disabled=e[7])},d(n){n&&(m(t),m(w),m($)),L&&L.d(),e[19](null),e[21](null),j=!1,r(S)}}}function De(e){let t,n,r=e[6].description+"";return{c(){t=f("div"),n=p(r),x(t,"class","text-xs text-terminal-text-dim")},m(e,r){u(e,t,r),d(t,n)},p(e,t){64&t[0]&&r!==(r=e[6].description+"")&&y(n,r)},d(e){e&&m(t)}}}function Fe(e){let t;return{c(){t=f("iconify-icon"),_(t,"icon","mdi:waveform")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Oe(e){let t,n;return{c(){t=f("iconify-icon"),n=p(" Stop Streaming"),_(t,"icon","mdi:stop")},m(e,r){u(e,t,r),u(e,n,r)},d(e){e&&(m(t),m(n))}}}function ze(t){let n;return{c(){n=p("Stop Streaming")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function Pe(t){let n,r=t[14]()+"";return{c(){n=p(r)},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function Ne(t){let n,o,s,l,c,a,g,y,w,j,S,T,C,L,M,E,A,D,F,O,z,N,R,I,B,J,U,W,G,H,q,V,K,X,Q,Y,Z,ee,te,ne,re,ie,oe;function se(e,t){return"file"===e[0]?Ae:Ee}let le=se(t),ce=le(t);function ae(e,t){return e[7]?Oe:Fe}let de=ae(t),ue=de(t);function me(e,t){return e[7]?ze:Pe}let fe=me(t),pe=fe(t);return{c(){n=f("div"),o=f("div"),o.innerHTML='<iconify-icon icon="mdi:waveform" class="text-lg"></iconify-icon> <span>Streaming Transcription</span>',s=b(),l=f("div"),l.textContent="Real-time processing with live transcript streaming. See results as they're generated - perfect for demos and testing.",c=b(),a=f("div"),g=f("div"),g.textContent="Source:",y=b(),w=f("div"),j=f("button"),S=f("iconify-icon"),T=p(" File"),C=b(),L=f("button"),M=f("iconify-icon"),E=p(" URL"),A=b(),ce.c(),D=b(),F=f("div"),O=f("div"),O.textContent="Settings:",z=b(),N=f("div"),R=f("div"),I=f("label"),I.textContent="Chunk size:",B=b(),J=f("select"),U=f("option"),U.textContent="0.25MB (Ultra-fast)",W=f("option"),W.textContent="0.5MB (Fast)",G=f("option"),G.textContent="1MB (Balanced)",H=f("option"),H.textContent="2MB (Fewer API calls)",q=b(),V=f("div"),K=f("label"),K.textContent="LLM correction:",X=b(),Q=f("select"),Y=f("option"),Y.textContent="Disabled (fastest)",Z=f("option"),Z.textContent="Per-chunk (real-time)",ee=f("option"),ee.textContent="Post-process (better quality)",te=b(),ne=f("button"),ue.c(),re=b(),pe.c(),x(o,"class","flex items-center gap-2 mb-4 font-bold text-terminal-accent"),x(l,"class","text-xs text-terminal-text-dim mb-4"),x(g,"class","font-bold mb-2"),_(S,"icon","mdi:file-outline"),j.disabled=t[7],x(j,"class","border border-terminal-border text-terminal-text px-4 py-2 hover:bg-yellow-400 transition-colors flex-1 flex items-center justify-center gap-2"),k(j,"bg-yellow-400","file"===t[0]),k(j,"bg-terminal-bg","file"!==t[0]),k(j,"opacity-50",t[7]),_(M,"icon","mdi:web"),L.disabled=t[7],x(L,"class","border border-terminal-border text-terminal-text px-4 py-2 hover:bg-yellow-400 transition-colors flex-1 flex items-center justify-center gap-2"),k(L,"bg-yellow-400","url"===t[0]),k(L,"bg-terminal-bg","url"!==t[0]),k(L,"opacity-50",t[7]),x(w,"class","flex gap-2 mb-3"),x(a,"class","mb-4"),x(O,"class","font-bold mb-2"),x(I,"for","chunk-size"),x(I,"class","text-terminal-text-dim block mb-1"),U.__value=.25,v(U,U.__value),W.__value=.5,v(W,W.__value),G.__value=1,v(G,G.__value),H.__value=2,v(H,H.__value),x(J,"id","chunk-size"),J.disabled=t[7],x(J,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),void 0===t[2]&&P(()=>t[23].call(J)),k(J,"opacity-50",t[7]),x(K,"for","llm-mode"),x(K,"class","text-terminal-text-dim block mb-1"),Y.__value="disabled",v(Y,Y.__value),Z.__value="per_chunk",v(Z,Z.__value),ee.__value="post_process",v(ee,ee.__value),x(Q,"id","llm-mode"),Q.disabled=t[7],x(Q,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),void 0===t[3]&&P(()=>t[24].call(Q)),k(Q,"opacity-50",t[7]),x(N,"class","space-y-3"),x(F,"class","mb-4 flex-1"),x(ne,"class","px-4 py-2 transition-colors w-full font-bold flex items-center justify-center gap-2"),k(ne,"bg-status-info",!t[7]),k(ne,"bg-status-error",t[7]),k(ne,"text-terminal-bg",!t[7]||t[7]),k(ne,"hover:bg-blue-500",!t[7]),k(ne,"hover:bg-red-600",t[7]),x(n,"class","border border-terminal-border p-4 flex flex-col")},m(e,r){u(e,n,r),d(n,o),d(n,s),d(n,l),d(n,c),d(n,a),d(a,g),d(a,y),d(a,w),d(w,j),d(j,S),d(j,T),d(w,C),d(w,L),d(L,M),d(L,E),d(a,A),ce.m(a,null),d(n,D),d(n,F),d(F,O),d(F,z),d(F,N),d(N,R),d(R,I),d(R,B),d(R,J),d(J,U),d(J,W),d(J,G),d(J,H),$(J,t[2],!0),d(N,q),d(N,V),d(V,K),d(V,X),d(V,Q),d(Q,Y),d(Q,Z),d(Q,ee),$(Q,t[3],!0),d(n,te),d(n,ne),ue.m(ne,null),d(ne,re),pe.m(ne,null),ie||(oe=[h(j,"click",t[17]),h(L,"click",t[18]),h(J,"change",t[23]),h(Q,"change",t[24]),h(ne,"click",function(){i(t[7]?t[16]:t[15])&&(t[7]?t[16]:t[15]).apply(this,arguments)})],ie=!0)},p(e,n){t=e,128&n[0]&&(j.disabled=t[7]),1&n[0]&&k(j,"bg-yellow-400","file"===t[0]),1&n[0]&&k(j,"bg-terminal-bg","file"!==t[0]),128&n[0]&&k(j,"opacity-50",t[7]),128&n[0]&&(L.disabled=t[7]),1&n[0]&&k(L,"bg-yellow-400","url"===t[0]),1&n[0]&&k(L,"bg-terminal-bg","url"!==t[0]),128&n[0]&&k(L,"opacity-50",t[7]),le===(le=se(t))&&ce?ce.p(t,n):(ce.d(1),ce=le(t),ce&&(ce.c(),ce.m(a,null))),128&n[0]&&(J.disabled=t[7]),4&n[0]&&$(J,t[2]),128&n[0]&&k(J,"opacity-50",t[7]),128&n[0]&&(Q.disabled=t[7]),8&n[0]&&$(Q,t[3]),128&n[0]&&k(Q,"opacity-50",t[7]),de!==(de=ae(t))&&(ue.d(1),ue=de(t),ue&&(ue.c(),ue.m(ne,re))),fe===(fe=me(t))&&pe?pe.p(t,n):(pe.d(1),pe=fe(t),pe&&(pe.c(),pe.m(ne,null))),128&n[0]&&k(ne,"bg-status-info",!t[7]),128&n[0]&&k(ne,"bg-status-error",t[7]),128&n[0]&&k(ne,"text-terminal-bg",!t[7]||t[7]),128&n[0]&&k(ne,"hover:bg-blue-500",!t[7]),128&n[0]&&k(ne,"hover:bg-red-600",t[7])},i:e,o:e,d(e){e&&m(n),ce.d(),ue.d(),pe.d(),ie=!1,r(oe)}}}function Re(e,t,n){let r,i,o,s,d,u,m,f,p,b;c(e,ue,e=>n(7,r=e)),c(e,fe,e=>n(29,i=e)),c(e,ge,e=>n(30,o=e)),c(e,be,e=>n(31,s=e)),c(e,he,e=>n(32,d=e)),c(e,xe,e=>n(33,u=e)),c(e,_e,e=>n(34,m=e)),c(e,ye,e=>n(35,f=e)),c(e,me,e=>n(36,p=e)),c(e,pe,e=>n(37,b=e));let g,h,x="file",_=null,y="",v=.25,w="disabled",$={icon:"mdi:file-plus",title:"Drop files here or click to browse",subtitle:"MP3, WAV, M4A, FLAC, etc. (up to 1GB)"},k=null,S=null;function T(e){n(6,$={icon:"mdi:file-music",title:e.name,subtitle:\`Ready to transcribe (\${ve(e.size)})\`,description:'Click "Live Transcribe" to start'}),_=e}function C(){n(6,$={icon:"mdi:file-plus",title:"Drop files here or click to browse",subtitle:"MP3, WAV, M4A, FLAC, etc. (up to 1GB)"}),_=null,h&&n(5,h.value="",h)}function L(){g&&(g.classList.remove("border-terminal-accent","bg-green-900/20"),g.classList.add("border-terminal-border"))}function M(){h&&h.click()}function E(e){n(0,x=e),"file"===e&&C()}async function D(e){const t=l(ae),n=t.find(e=>"streaming"===e.processing_method&&e.filename===i&&"processing"===e.status);switch(e.type){case"status":a(ge,o+=\`üì° \${e.message}\\n\`,o),n&&e.job_id&&n.job_id.startsWith("stream_")&&(n.job_id=e.job_id,n.file_size=e.total_size,n.estimated_chunks=e.estimated_chunks,ae.set(t)),e.total_size&&a(_e,m=ve(e.total_size),m);break;case"chunk_info":a(xe,u=e.total_chunks,u),a(ge,o+=\`üß© Ready to process \${e.total_chunks} chunks (\${e.chunk_size_mb}MB each)\\n\\n\`,o);break;case"chunk_start":a(be,s=e.progress,s),a(ge,o+=\`üîÑ Chunk \${e.chunk_index+1} (\${e.progress}%) - transcribing...\\n\`,o),n&&(n.progress=e.progress,ae.set(t));break;case"delta":if(e.llm_applied)a(ge,o+=\`üìù Raw: "\${e.raw_text}"\\n\`,o),a(ge,o+=\`üß† LLM: "\${e.corrected_text}"\\n\\n\`,o);else if(e.llm_error)a(ge,o+=\`üìù "\${e.raw_text}"\\n\`,o),a(ge,o+=\`‚ö†Ô∏è  LLM failed: \${e.llm_error}\\n\\n\`,o);else{const t=e.text||e.raw_text;a(ge,o+=\`üìù "\${t}"\\n\\n\`,o)}a(he,d+=1,d);break;case"chunk_done":a(be,s=e.progress,s),a(ge,o+=\`‚úÖ Chunk \${e.chunk_index+1} completed (\${e.progress}%)\\n\\n\`,o);break;case"chunk_error":a(ge,o+=\`‚ùå Chunk \${e.chunk_index+1} error: \${e.error}\\n\\n\`,o);break;case"llm_processing":const r="post_process"===e.mode?"post-processing":"per-chunk";a(ge,o+=\`üß† \${e.message||\`Applying LLM corrections (\${r})...\`}\\n\`,o);break;case"llm_done":const l="post_process"===e.mode?"Post-processing":"Per-chunk";a(ge,o+=\`‚úÖ \${l} LLM correction completed\\n\`,o),"post_process"===e.mode&&a(ge,o+=\`üìù Improved transcript:\\n"\${e.corrected_text}"\\n\\n\`,o);break;case"llm_error":const c="post_process"===e.mode?"Post-processing":"Per-chunk";a(ge,o+=\`‚ùå \${c} LLM correction failed: \${e.error}\\n\`,o),e.fallback_text&&a(ge,o+=\`üìù Using original transcript: "\${e.fallback_text}"\\n\\n\`,o);break;case"done":a(ge,o+="\\nüéâ Transcription complete!\\n",o),a(ge,o+=\`üìä Final transcript: "\${e.final_transcript}"\\n\`,o);const f=t.find(e=>"streaming"===e.processing_method&&e.filename===i&&"processing"===e.status);if(f){f.status="done",f.final_transcript=e.final_transcript,f.raw_transcript=e.raw_transcript,f.corrected_transcript=e.corrected_transcript,f.total_segments=e.total_segments,f.completed_at=(new Date).toISOString(),f.progress=100,f.transcripts=[{text:e.final_transcript,raw_text:e.raw_transcript,segments:[],start:0,duration:f.file_size||0,chunk_index:"streaming"}],ae.set(t);try{await async function(e){try{if(!(await fetch("/save-streaming-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e.job_id,filename:e.filename,file_size:e.file_size,final_transcript:e.final_transcript,raw_transcript:e.raw_transcript,corrected_transcript:e.corrected_transcript,total_segments:e.total_segments,created_at:e.created_at,completed_at:e.completed_at,use_llm:e.use_llm,llm_mode:e.llm_mode,chunk_size_mb:e.chunk_size_mb,source_url:e.source_url||null,transcripts:e.transcripts||[]})})).ok)throw new Error("Failed to save streaming job");le.info("api","Saved streaming job to server",{job_id:e.job_id})}catch(e){le.error("Failed to save streaming job to server",e)}}(f),ce.info("Saved streaming job to server",{job_id:f.job_id});[500,1500,3e3].forEach((e,t)=>{setTimeout(async()=>{try{await we(),ce.info(\`Jobs refresh attempt \${t+1} completed after streaming\`)}catch(e){ce.error(\`Jobs refresh attempt \${t+1} failed after streaming\`,e)}},e)})}catch(e){ce.error("Failed to save streaming job to server",e),setTimeout(async()=>{try{await we(),ce.info("Attempted jobs refresh after save failure")}catch(e){ce.error("Failed to refresh jobs after save failure",e)}},1e3)}ce.complete("Streaming job completed",{job_id:f.job_id,filename:i,transcript_length:e.final_transcript?.length||0})}break;case"error":a(ge,o+=\`\\n‚ùå Error: \${e.error}\\n\`,o);const p=t.find(e=>"streaming"===e.processing_method&&e.filename===i&&"processing"===e.status);p&&(p.status="failed",p.error=e.error,p.failed_at=(new Date).toISOString(),ae.set(t))}}function F(){k&&(k.abort(),k=null),a(ue,r=!1,r),S&&(clearInterval(S),S=null),setTimeout(()=>{"file"===x?C():n(1,y="")},2e3)}return[x,y,v,w,g,h,$,r,function(e){e.preventDefault(),g&&(g.classList.add("border-terminal-accent","bg-green-900/20"),g.classList.remove("border-terminal-border"))},L,function(e){e.preventDefault(),L();const t=Array.from(e.dataTransfer.files);t.length>0&&T(t[0])},function(e){const t=Array.from(e.target.files);t.length>0&&T(t[0])},M,E,function(){return r?\`üîÑ Streaming \${i}...\`:"file"===x?_?\`Live Transcribe \${_.name}\`:"Select File to Transcribe":"Live Transcribe URL"},function(){a(me,p=!1,p),setTimeout(()=>{!async function(){if(r)return;let e,t;if("file"===x){if(!_)return void M();t=_.name;const n=new FormData;n.append("file",_),n.append("chunk_size_mb",v.toString()),"disabled"!==w?(n.append("use_llm","true"),n.append("llm_mode",w)):n.append("use_llm","false"),e={method:"POST",body:n}}else if("url"===x){if(!y.trim())return void alert("Please enter an audio URL first");t=y.split("/").pop()||"audio file";const n={url:y.trim(),chunk_size_mb:v};"disabled"!==w?(n.use_llm=!0,n.llm_mode=w):n.use_llm=!1,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}}await async function(e,t,n){if(r)return;a(ue,r=!0,r),a(me,p=!0,p),a(fe,i=n,i),a(ge,o="",o),a(be,s=0,s),a(he,d=0,d),a(xe,u=0,u),a(_e,m="",m),a(ye,f=w,f),a(pe,b=Date.now(),b),S=setInterval(()=>{},1e3);const c={job_id:"stream_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),filename:n,status:"processing",file_size:0,processing_method:"streaming",upload_method:"streaming",created_at:(new Date).toISOString(),use_llm:"disabled"!==w,llm_mode:w,chunk_size_mb:v,progress:0},g=l(ae);ae.set([c,...g]),k=new AbortController,t.signal=k.signal,a(ge,o="üöÄ Starting transcription...\\n\\n",o);try{const n=await fetch(e,t);if(!n.ok)throw new Error("Streaming failed: "+n.status);const i=n.body.getReader(),o=new TextDecoder;let s="";for(;;){const{done:e,value:t}=await i.read();if(e){ce.complete("Stream reader reached end");break}if(!r){ce.info("warning","Stream stopped by user");break}s+=o.decode(t,{stream:!0});const n=s.split("\\n");s=n.pop()||"";for(const e of n)if(e.startsWith("data: "))try{const t=JSON.parse(e.slice(6));await D(t)}catch(t){console.error("Failed to parse SSE data:",t,e)}}}catch(e){"AbortError"===e.name?(ce.info("stream","Stream aborted by user"),a(ge,o+="\\n‚ùå Streaming stopped by user\\n",o)):(ce.error("Streaming failed",e),a(ge,o+=\`\\n‚ùå Streaming failed: \${e.message}\\n\`,o))}finally{F()}}("/stream",e,t)}()},100)},F,()=>E("file"),()=>E("url"),function(e){A[e?"unshift":"push"](()=>{g=e,n(4,g)})},e=>"Enter"===e.key&&M(),function(e){A[e?"unshift":"push"](()=>{h=e,n(5,h)})},function(){y=this.value,n(1,y)},function(){v=j(this),n(2,v)},function(){w=j(this),n(3,w)}]}class Ie extends te{constructor(e){super(),ee(this,e,Re,Ne,o,{},null,[-1,-1])}}function Be(e){let t,n,r,i,o,s,l,c,a,g,h,v,$,j,k,S,T,C,L,M,E,A,D,F,O,z,P,N,R,I,B,J,U,W,G,H,q,V,K,X,Q,Y,Z=(e[7]||"?")+"",ee=(e[8]||"-")+"";function te(e,t){return e[1]?Ue:Je}let ne=te(e),re=ne(e);function ie(e,t){return e[1]?Ge:We}let oe=ie(e),se=oe(e);function le(e,t){return e[1]?qe:He}let ce=le(e),ae=ce(e);function de(e,t){return e[0]?Ke:Ve}let ue=de(e),me=ue(e);return{c(){t=f("div"),n=f("div"),r=f("iconify-icon"),i=b(),re.c(),o=b(),s=f("div"),l=f("div"),se.c(),c=b(),a=f("span"),g=p(e[4]),h=b(),v=f("div"),$=f("div"),j=p(e[5]),k=p("%"),S=b(),T=f("div"),C=f("span"),L=p("Chunks: "),M=p(e[6]),E=p("/"),A=p(Z),D=b(),F=f("span"),O=p("Size: "),z=p(ee),P=b(),N=f("span"),R=p("Elapsed: "),I=p(e[2]),B=p("s"),J=b(),U=f("span"),W=p("Mode: "),G=p(e[9]),H=b(),q=f("div"),V=f("div"),K=f("iconify-icon"),X=b(),ae.c(),Q=b(),Y=f("div"),me.c(),_(r,"icon","mdi:waveform"),_(r,"class","text-lg"),x(n,"class","font-bold text-center mb-4 border-b border-terminal-border pb-2 flex items-center justify-center gap-2"),x(a,"class","text-terminal-text-dim"),x(l,"class","flex items-center gap-2 mb-2"),x($,"class","bg-status-info h-full flex items-center justify-center text-terminal-bg text-xs font-bold transition-all duration-300"),w($,"width",e[5]+"%"),x(v,"class","bg-terminal-bg border border-terminal-border h-5 overflow-hidden"),x(T,"class","text-xs text-terminal-text-dim mt-2 grid grid-cols-2 md:grid-cols-4 gap-2"),x(s,"class","mb-4"),_(K,"icon","mdi:text-box"),_(K,"class","text-lg"),x(V,"class","p-3 border-b border-terminal-border font-bold text-terminal-accent flex items-center gap-2"),x(Y,"id","streaming-transcript"),x(Y,"class","p-4 max-h-80 overflow-y-auto font-mono text-sm leading-relaxed"),x(q,"class","border border-terminal-border bg-terminal-bg"),x(t,"class","border-2 border-terminal-border bg-terminal-bg-light p-4 mb-4")},m(e,m){u(e,t,m),d(t,n),d(n,r),d(n,i),re.m(n,null),d(t,o),d(t,s),d(s,l),se.m(l,null),d(l,c),d(l,a),d(a,g),d(s,h),d(s,v),d(v,$),d($,j),d($,k),d(s,S),d(s,T),d(T,C),d(C,L),d(C,M),d(C,E),d(C,A),d(T,D),d(T,F),d(F,O),d(F,z),d(T,P),d(T,N),d(N,R),d(N,I),d(N,B),d(T,J),d(T,U),d(U,W),d(U,G),d(t,H),d(t,q),d(q,V),d(V,K),d(V,X),ae.m(V,null),d(q,Q),d(q,Y),me.m(Y,null)},p(e,t){ne!==(ne=te(e))&&(re.d(1),re=ne(e),re&&(re.c(),re.m(n,null))),oe!==(oe=ie(e))&&(se.d(1),se=oe(e),se&&(se.c(),se.m(l,c))),16&t&&y(g,e[4]),32&t&&y(j,e[5]),32&t&&w($,"width",e[5]+"%"),64&t&&y(M,e[6]),128&t&&Z!==(Z=(e[7]||"?")+"")&&y(A,Z),256&t&&ee!==(ee=(e[8]||"-")+"")&&y(z,ee),4&t&&y(I,e[2]),512&t&&y(G,e[9]),ce!==(ce=le(e))&&(ae.d(1),ae=ce(e),ae&&(ae.c(),ae.m(V,null))),ue===(ue=de(e))&&me?me.p(e,t):(me.d(1),me=ue(e),me&&(me.c(),me.m(Y,null)))},d(e){e&&m(t),re.d(),se.d(),ae.d(),me.d()}}}function Je(e){let t;return{c(){t=p("Streaming Results")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Ue(e){let t;return{c(){t=p("Live Streaming Transcription")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function We(e){let t,n,r;return{c(){t=f("span"),n=b(),r=f("span"),r.textContent="Streaming completed",x(t,"class","w-2 h-2 bg-status-success rounded-full"),x(r,"class","font-bold text-status-success")},m(e,i){u(e,t,i),u(e,n,i),u(e,r,i)},d(e){e&&(m(t),m(n),m(r))}}}function Ge(e){let t,n,r;return{c(){t=f("span"),n=b(),r=f("span"),r.textContent="Streaming in progress...",x(t,"class","w-2 h-2 bg-status-info rounded-full animate-pulse"),x(r,"class","font-bold text-status-info")},m(e,i){u(e,t,i),u(e,n,i),u(e,r,i)},d(e){e&&(m(t),m(n),m(r))}}}function He(e){let t;return{c(){t=p("Final Transcript:")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function qe(e){let t;return{c(){t=p("Live Transcript:")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Ve(t){let n;return{c(){n=f("div"),n.textContent="Waiting for transcription results...",x(n,"class","text-terminal-text-dim italic")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function Ke(e){let t,n;return{c(){t=f("pre"),n=p(e[0]),x(t,"class","whitespace-pre-wrap")},m(e,r){u(e,t,r),d(t,n)},p(e,t){1&t&&y(n,e[0])},d(e){e&&m(t)}}}function Xe(t){let n,r=(t[1]||t[3])&&Be(t);return{c(){r&&r.c(),n=g()},m(e,t){r&&r.m(e,t),u(e,n,t)},p(e,[t]){e[1]||e[3]?r?r.p(e,t):(r=Be(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&m(n),r&&r.d(e)}}}function Qe(e,t,n){let r,i,o,s,l,a,d,u,m,f;c(e,ge,e=>n(0,r=e)),c(e,ue,e=>n(1,i=e)),c(e,pe,e=>n(11,o=e)),c(e,me,e=>n(3,s=e)),c(e,fe,e=>n(4,l=e)),c(e,be,e=>n(5,a=e)),c(e,he,e=>n(6,d=e)),c(e,xe,e=>n(7,u=e)),c(e,_e,e=>n(8,m=e)),c(e,ye,e=>n(9,f=e));let p=0,b=null;return e.$$.update=()=>{3074&e.$$.dirty&&(i&&!b?n(10,b=setInterval(()=>{n(2,p=Math.floor((Date.now()-o)/1e3))},1e3)):!i&&b&&(clearInterval(b),n(10,b=null))),1&e.$$.dirty&&r&&setTimeout(()=>{const e=document.getElementById("streaming-transcript");e&&(e.scrollTop=e.scrollHeight)},50)},[r,i,p,s,l,a,d,u,m,f,b,o]}class Ye extends te{constructor(e){super(),ee(this,e,Qe,Xe,o,{})}}function Ze(t){let n,r,i,o,s,l,c,a;return i=new Me({}),s=new Ie({}),c=new Ye({}),{c(){n=f("div"),r=f("div"),X(i.$$.fragment),o=b(),X(s.$$.fragment),l=b(),X(c.$$.fragment),x(r,"class","grid grid-cols-1 lg:grid-cols-2 gap-4"),x(n,"class","border-2 border-terminal-border bg-terminal-bg-light p-4 mb-4")},m(e,t){u(e,n,t),d(n,r),Q(i,r,null),d(r,o),Q(s,r,null),u(e,l,t),Q(c,e,t),a=!0},p:e,i(e){a||(H(i.$$.fragment,e),H(s.$$.fragment,e),H(c.$$.fragment,e),a=!0)},o(e){q(i.$$.fragment,e),q(s.$$.fragment,e),q(c.$$.fragment,e),a=!1},d(e){e&&(m(n),m(l)),Y(i),Y(s),Y(c,e)}}}function et(e){return M(),[]}class tt extends te{constructor(e){super(),ee(this,e,et,Ze,o,{})}}function nt(e){let t;return{c(){t=f("span"),t.textContent="URL",x(t,"class","text-status-info text-xs bg-blue-900/30 px-1 rounded")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function rt(e){let t;return{c(){t=f("span"),t.textContent="Streamed",x(t,"class","text-status-info text-xs bg-blue-900/30 px-1 rounded")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function it(e){let t,n,r,i,o,s=e[0].total_segments+"";return{c(){t=f("span"),n=f("iconify-icon"),r=b(),i=p(s),o=p(" segments"),_(n,"icon","mdi:format-list-numbered"),_(n,"class","text-xs")},m(e,s){u(e,t,s),d(t,n),d(t,r),d(t,i),d(t,o)},p(e,t){1&t&&s!==(s=e[0].total_segments+"")&&y(i,s)},d(e){e&&m(t)}}}function ot(e){let t,n,r,i,o=(e[0].progress||0)+"";return{c(){t=f("div"),n=f("div"),r=p(o),i=p("%"),x(n,"class","bg-terminal-accent h-full flex items-center justify-center text-terminal-bg text-xs font-bold transition-all duration-300"),w(n,"width",(e[0].progress||0)+"%"),x(t,"class","bg-terminal-bg border border-terminal-border h-5 overflow-hidden mt-2")},m(e,o){u(e,t,o),d(t,n),d(n,r),d(n,i)},p(e,t){1&t&&o!==(o=(e[0].progress||0)+"")&&y(r,o),1&t&&w(n,"width",(e[0].progress||0)+"%")},d(e){e&&m(t)}}}function st(e){let t;return{c(){t=f("span"),t.innerHTML='<iconify-icon icon="mdi:brain" class="text-xs"></iconify-icon> LLM Enhanced',x(t,"class","text-terminal-accent")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function lt(e){let t,n,r,i,o=e[0].error+"";return{c(){t=f("span"),n=f("iconify-icon"),r=p(" \\n          Error: "),i=p(o),_(n,"icon","mdi:alert-circle"),_(n,"class","text-xs"),x(t,"class","text-status-error")},m(e,o){u(e,t,o),d(t,n),d(t,r),d(t,i)},p(e,t){1&t&&o!==(o=e[0].error+"")&&y(i,o)},d(e){e&&m(t)}}}function ct(e){let t;function n(e,t){return"done"===e[0].status?dt:at}let r=n(e),i=r(e);return{c(){t=f("div"),i.c(),x(t,"class","border-t border-terminal-border bg-gray-900/5 p-3")},m(e,n){u(e,t,n),i.m(t,null)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t,null)))},d(e){e&&m(t),i.d()}}}function at(e){let t,n,r,i,o,s,l,c,a,g,h,_,v,w,$,j,k,S,T,C,L,M,E,A,D,F,O,z,P,N,R,I,B,J=e[0].job_id+"",U=e[0].status+"",W=(e[0].upload_method||"direct")+"",G=(e[0].processing_method||"direct")+"",H=(e[0].use_llm?e[0].llm_mode||"enabled":"disabled")+"",q=ve(e[0].file_size||0)+"",V=e[0].chunk_size_mb&&ut(e);return{c(){t=f("div"),n=f("div"),r=f("div"),r.textContent="Job Details",i=b(),o=f("div"),s=f("div"),l=p("ID: "),c=p(J),a=b(),g=f("div"),h=p("Status: "),_=p(U),v=b(),w=f("div"),$=p("Upload: "),j=p(W),k=b(),S=f("div"),T=p("Processing: "),C=p(G),L=b(),M=f("div"),E=f("div"),E.textContent="Settings",A=b(),D=f("div"),F=f("div"),O=p("LLM: "),z=p(H),P=b(),V&&V.c(),N=b(),R=f("div"),I=p("File Size: "),B=p(q),x(r,"class","text-terminal-accent font-bold mb-2"),x(o,"class","space-y-1 text-xs text-terminal-text-dim"),x(E,"class","text-terminal-accent font-bold mb-2"),x(D,"class","space-y-1 text-xs text-terminal-text-dim"),x(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(e,m){u(e,t,m),d(t,n),d(n,r),d(n,i),d(n,o),d(o,s),d(s,l),d(s,c),d(o,a),d(o,g),d(g,h),d(g,_),d(o,v),d(o,w),d(w,$),d(w,j),d(o,k),d(o,S),d(S,T),d(S,C),d(t,L),d(t,M),d(M,E),d(M,A),d(M,D),d(D,F),d(F,O),d(F,z),d(D,P),V&&V.m(D,null),d(D,N),d(D,R),d(R,I),d(R,B)},p(e,t){1&t&&J!==(J=e[0].job_id+"")&&y(c,J),1&t&&U!==(U=e[0].status+"")&&y(_,U),1&t&&W!==(W=(e[0].upload_method||"direct")+"")&&y(j,W),1&t&&G!==(G=(e[0].processing_method||"direct")+"")&&y(C,G),1&t&&H!==(H=(e[0].use_llm?e[0].llm_mode||"enabled":"disabled")+"")&&y(z,H),e[0].chunk_size_mb?V?V.p(e,t):(V=ut(e),V.c(),V.m(D,N)):V&&(V.d(1),V=null),1&t&&q!==(q=ve(e[0].file_size||0)+"")&&y(B,q)},d(e){e&&m(t),V&&V.d()}}}function dt(e){let t,n,i,o,s,l,c,a,g,v,w,$,j,k,S,T,C,L,M,E,A,D,F,O,z,P,N,R,I,B,J,U,W,G,H,q,V,K,X,Q=e[0].job_id+"",Y=e[0].status+"",Z=(e[0].processing_method||"direct")+"",ee=e[2]?"Copied!":"Copy Transcript",te=e[0].total_segments>0&&mt(e);function ne(e,t){return"streaming"===e[0].processing_method?pt:ft}let re=ne(e),ie=re(e);function oe(e,t){return"streaming"===e[0].processing_method?gt:bt}let se=oe(e),le=se(e);return{c(){t=f("div"),n=f("div"),i=f("div"),i.textContent="Job Details",o=b(),s=f("div"),l=f("div"),c=p("ID: "),a=p(Q),g=b(),v=f("div"),w=p("Status: "),$=p(Y),j=b(),k=f("div"),S=p("Method: "),T=p(Z),C=b(),te&&te.c(),L=b(),M=f("div"),M.textContent="Actions",E=b(),A=f("div"),D=f("button"),F=f("iconify-icon"),O=b(),z=p(ee),P=b(),N=f("button"),N.innerHTML='<iconify-icon icon="mdi:code-json" class="text-xs"></iconify-icon> Copy JSON',R=b(),I=f("div"),B=f("div"),B.textContent="Full Transcript",J=b(),U=f("div"),W=f("div"),G=f("iconify-icon"),H=b(),ie.c(),q=b(),V=f("div"),le.c(),x(i,"class","text-terminal-accent font-bold mb-2"),x(s,"class","space-y-1 text-xs text-terminal-text-dim mb-4"),x(M,"class","text-terminal-accent font-bold mb-2"),_(F,"icon","mdi:content-copy"),_(F,"class","text-xs"),D.disabled=e[2],x(D,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-2 py-1 text-xs hover:bg-gray-700 transition-colors flex items-center gap-1 w-full"),x(N,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-2 py-1 text-xs hover:bg-gray-700 transition-colors flex items-center gap-1 w-full"),x(A,"class","space-y-2"),x(n,"class","lg:col-span-1 flex flex-col"),x(B,"class","text-terminal-accent font-bold mb-2"),_(G,"icon","mdi:text-box"),_(G,"class","text-sm"),x(W,"class","p-3 border-b border-terminal-border font-bold text-terminal-text-dim text-xs flex-shrink-0"),x(V,"class","p-4 flex-1 overflow-y-auto font-mono text-sm leading-relaxed min-h-[16rem]"),x(U,"class","border border-terminal-border bg-terminal-bg flex flex-col flex-1 min-h-0"),x(I,"class","lg:col-span-2 flex flex-col"),x(t,"class","grid grid-cols-1 lg:grid-cols-3 gap-4 lg:items-start")},m(r,m){u(r,t,m),d(t,n),d(n,i),d(n,o),d(n,s),d(s,l),d(l,c),d(l,a),d(s,g),d(s,v),d(v,w),d(v,$),d(s,j),d(s,k),d(k,S),d(k,T),d(s,C),te&&te.m(s,null),d(n,L),d(n,M),d(n,E),d(n,A),d(A,D),d(D,F),d(D,O),d(D,z),d(A,P),d(A,N),d(t,R),d(t,I),d(I,B),d(I,J),d(I,U),d(U,W),d(W,G),d(W,H),ie.m(W,null),d(U,q),d(U,V),le.m(V,null),K||(X=[h(D,"click",e[9]),h(N,"click",e[10])],K=!0)},p(e,t){1&t&&Q!==(Q=e[0].job_id+"")&&y(a,Q),1&t&&Y!==(Y=e[0].status+"")&&y($,Y),1&t&&Z!==(Z=(e[0].processing_method||"direct")+"")&&y(T,Z),e[0].total_segments>0?te?te.p(e,t):(te=mt(e),te.c(),te.m(s,null)):te&&(te.d(1),te=null),4&t&&ee!==(ee=e[2]?"Copied!":"Copy Transcript")&&y(z,ee),4&t&&(D.disabled=e[2]),re!==(re=ne(e))&&(ie.d(1),ie=re(e),ie&&(ie.c(),ie.m(W,null))),se===(se=oe(e))&&le?le.p(e,t):(le.d(1),le=se(e),le&&(le.c(),le.m(V,null)))},d(e){e&&m(t),te&&te.d(),ie.d(),le.d(),K=!1,r(X)}}}function ut(e){let t,n,r,i,o=e[0].chunk_size_mb+"";return{c(){t=f("div"),n=p("Chunk Size: "),r=p(o),i=p("MB")},m(e,o){u(e,t,o),d(t,n),d(t,r),d(t,i)},p(e,t){1&t&&o!==(o=e[0].chunk_size_mb+"")&&y(r,o)},d(e){e&&m(t)}}}function mt(e){let t,n,r,i=e[0].total_segments+"";return{c(){t=f("div"),n=p("Segments: "),r=p(i)},m(e,i){u(e,t,i),d(t,n),d(t,r)},p(e,t){1&t&&i!==(i=e[0].total_segments+"")&&y(r,i)},d(e){e&&m(t)}}}function ft(e){let t;return{c(){t=p("Final Transcript")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function pt(e){let t;return{c(){t=p("Final Transcript (Streaming)")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function bt(e){let t;function n(e,t){return e[4]?yt:e[5]&&e[3]?_t:e[5]?xt:ht}let r=n(e),i=r(e);return{c(){i.c(),t=g()},m(e,n){i.m(e,n),u(e,t,n)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&m(t),i.d(e)}}}function gt(e){let t;function n(e,t){return e[0].final_transcript?jt:e[0].corrected_transcript?$t:e[0].raw_transcript?wt:vt}let r=n(e),i=r(e);return{c(){i.c(),t=g()},m(e,n){i.m(e,n),u(e,t,n)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&m(t),i.d(e)}}}function ht(t){let n;return{c(){n=f("div"),n.textContent="Transcript will load when expanded",x(n,"class","text-terminal-text-dim italic")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function xt(t){let n;return{c(){n=f("div"),n.textContent="No transcript available",x(n,"class","text-terminal-text-dim italic")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function _t(e){let t,n;return{c(){t=f("pre"),n=p(e[3]),x(t,"class","whitespace-pre-wrap text-terminal-text")},m(e,r){u(e,t,r),d(t,n)},p(e,t){8&t&&y(n,e[3])},d(e){e&&m(t)}}}function yt(t){let n;return{c(){n=f("div"),n.innerHTML='<iconify-icon icon="mdi:loading" class="animate-spin"></iconify-icon>\\n                       Loading transcript...',x(n,"class","text-terminal-text-dim italic flex items-center gap-2")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function vt(t){let n;return{c(){n=f("div"),n.textContent="No transcript available",x(n,"class","text-terminal-text-dim italic")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function wt(e){let t,n,r=e[0].raw_transcript+"";return{c(){t=f("pre"),n=p(r),x(t,"class","whitespace-pre-wrap text-terminal-text")},m(e,r){u(e,t,r),d(t,n)},p(e,t){1&t&&r!==(r=e[0].raw_transcript+"")&&y(n,r)},d(e){e&&m(t)}}}function $t(e){let t,n,r=e[0].corrected_transcript+"";return{c(){t=f("pre"),n=p(r),x(t,"class","whitespace-pre-wrap text-terminal-text")},m(e,r){u(e,t,r),d(t,n)},p(e,t){1&t&&r!==(r=e[0].corrected_transcript+"")&&y(n,r)},d(e){e&&m(t)}}}function jt(e){let t,n,r=e[0].final_transcript+"";return{c(){t=f("pre"),n=p(r),x(t,"class","whitespace-pre-wrap text-terminal-text")},m(e,r){u(e,t,r),d(t,n)},p(e,t){1&t&&r!==(r=e[0].final_transcript+"")&&y(n,r)},d(e){e&&m(t)}}}function kt(t){let n,i,o,s,l,c,a,g,v,w,$,j,S,T,C,L,M,E,A,D,F,O,z,P,N,R,I,B,J,U,W,G,H,q,V,K,X,Q,Y,Z,ee,te,ne,re,ie,oe,se,le,ce,ae,de,ue=(t[0].filename||"Unknown")+"",me=t[0].job_id.slice(0,8)+"",fe=ve(t[0].file_size||0)+"",pe=(t[0].processing_method||"direct")+"",be=St(t[0])+"",ge=new Date(t[0].created_at).toLocaleString()+"",he="url"===t[0].upload_method&&nt(),xe="streaming"===t[0].upload_method&&rt(),_e=t[0].total_segments>0&&it(t),ye=void 0!==t[0].progress&&("processing"===t[0].status||"uploaded"===t[0].status)&&ot(t),we=t[0].use_llm&&st(),$e=t[0].error&&lt(t),je=t[1]&&ct(t);return{c(){n=f("div"),i=f("div"),o=f("div"),s=f("div"),l=f("div"),c=f("iconify-icon"),a=b(),g=f("span"),v=p(ue),w=b(),he&&he.c(),$=b(),xe&&xe.c(),j=b(),S=f("div"),T=f("span"),C=f("iconify-icon"),L=b(),M=p(me),E=p("..."),A=b(),D=f("span"),F=f("iconify-icon"),O=b(),z=p(fe),P=b(),N=f("span"),R=f("iconify-icon"),I=b(),B=p(pe),J=b(),_e&&_e.c(),U=b(),W=f("div"),G=f("div"),H=f("iconify-icon"),V=b(),K=p(be),Q=b(),Y=f("button"),Y.innerHTML='<iconify-icon icon="mdi:delete" class="text-lg"></iconify-icon>',Z=b(),ye&&ye.c(),ee=b(),te=f("div"),ne=f("span"),re=f("iconify-icon"),ie=b(),oe=p(ge),se=b(),we&&we.c(),le=b(),$e&&$e.c(),ce=b(),je&&je.c(),_(c,"icon","mdi:file-music"),_(c,"class","text-terminal-accent"),x(g,"class","font-bold"),x(l,"class","flex items-center gap-2 mb-1"),_(C,"icon","mdi:identifier"),_(C,"class","text-xs"),_(F,"icon","mdi:file-outline"),_(F,"class","text-xs"),_(R,"icon","mdi:cog"),_(R,"class","text-xs"),x(S,"class","flex flex-wrap gap-3 text-xs text-terminal-text-dim"),x(s,"class","flex-1 min-w-0"),_(H,"icon",q=t[7](t[0].status)),_(H,"class","text-xs"),k(H,"animate-spin","processing"===t[0].status||"uploaded"===t[0].status),x(G,"class",X="px-2 py-1 text-xs font-bold uppercase "+t[6](t[0].status)+" flex items-center gap-1"),x(Y,"class","text-status-error hover:bg-status-error hover:text-terminal-bg transition-colors p-1 rounded flex items-center justify-center"),x(Y,"title","Delete job"),x(W,"class","flex items-center gap-2 flex-shrink-0"),x(o,"class","flex items-start gap-3"),_(re,"icon","mdi:clock-outline"),_(re,"class","text-xs"),x(te,"class","mt-2 flex flex-wrap gap-3 text-xs text-terminal-text-dim"),x(i,"class","p-3 pr-4 hover:bg-gray-800/5 transition-colors cursor-pointer"),x(i,"role","button"),x(i,"tabindex","0"),x(n,"class","border-b border-terminal-border")},m(e,r){var m;u(e,n,r),d(n,i),d(i,o),d(o,s),d(s,l),d(l,c),d(l,a),d(l,g),d(g,v),d(l,w),he&&he.m(l,null),d(l,$),xe&&xe.m(l,null),d(s,j),d(s,S),d(S,T),d(T,C),d(T,L),d(T,M),d(T,E),d(S,A),d(S,D),d(D,F),d(D,O),d(D,z),d(S,P),d(S,N),d(N,R),d(N,I),d(N,B),d(S,J),_e&&_e.m(S,null),d(o,U),d(o,W),d(W,G),d(G,H),d(G,V),d(G,K),d(W,Q),d(W,Y),d(i,Z),ye&&ye.m(i,null),d(i,ee),d(i,te),d(te,ne),d(ne,re),d(ne,ie),d(ne,oe),d(te,se),we&&we.m(te,null),d(te,le),$e&&$e.m(te,null),d(n,ce),je&&je.m(n,null),ae||(de=[h(Y,"click",(m=t[8],function(e){return e.stopPropagation(),m.call(this,e)})),h(i,"click",t[11]),h(i,"keydown",t[12])],ae=!0)},p(e,[t]){1&t&&ue!==(ue=(e[0].filename||"Unknown")+"")&&y(v,ue),"url"===e[0].upload_method?he||(he=nt(),he.c(),he.m(l,$)):he&&(he.d(1),he=null),"streaming"===e[0].upload_method?xe||(xe=rt(),xe.c(),xe.m(l,null)):xe&&(xe.d(1),xe=null),1&t&&me!==(me=e[0].job_id.slice(0,8)+"")&&y(M,me),1&t&&fe!==(fe=ve(e[0].file_size||0)+"")&&y(z,fe),1&t&&pe!==(pe=(e[0].processing_method||"direct")+"")&&y(B,pe),e[0].total_segments>0?_e?_e.p(e,t):(_e=it(e),_e.c(),_e.m(S,null)):_e&&(_e.d(1),_e=null),1&t&&q!==(q=e[7](e[0].status))&&_(H,"icon",q),1&t&&k(H,"animate-spin","processing"===e[0].status||"uploaded"===e[0].status),1&t&&be!==(be=St(e[0])+"")&&y(K,be),1&t&&X!==(X="px-2 py-1 text-xs font-bold uppercase "+e[6](e[0].status)+" flex items-center gap-1")&&x(G,"class",X),void 0===e[0].progress||"processing"!==e[0].status&&"uploaded"!==e[0].status?ye&&(ye.d(1),ye=null):ye?ye.p(e,t):(ye=ot(e),ye.c(),ye.m(i,ee)),1&t&&ge!==(ge=new Date(e[0].created_at).toLocaleString()+"")&&y(oe,ge),e[0].use_llm?we||(we=st(),we.c(),we.m(te,le)):we&&(we.d(1),we=null),e[0].error?$e?$e.p(e,t):($e=lt(e),$e.c(),$e.m(te,null)):$e&&($e.d(1),$e=null),e[1]?je?je.p(e,t):(je=ct(e),je.c(),je.m(n,null)):je&&(je.d(1),je=null)},i:e,o:e,d(e){e&&m(n),he&&he.d(),xe&&xe.d(),_e&&_e.d(),ye&&ye.d(),we&&we.d(),$e&&$e.d(),je&&je.d(),ae=!1,r(de)}}}function St(e){return"processing"===e.status||"uploaded"===e.status?"streaming"===e.processing_method?"STREAMING":"PROCESSING":"done"===e.status?"COMPLETED":e.status.toUpperCase()}function Tt(e,t,n){let{job:r}=t,i=!1,o=!1,s="",c=!1,a=!1;const d={processing:"bg-status-info text-terminal-bg",uploaded:"bg-status-info text-terminal-bg",failed:"bg-status-error text-terminal-bg",done:"bg-status-success text-terminal-bg"},u={processing:"mdi:sync",uploaded:"mdi:sync",failed:"mdi:alert-circle",done:"mdi:check-circle"};function m(){n(1,i=!i),i&&"done"===r.status&&"streaming"!==r.processing_method&&async function(){if(!c&&!a&&"streaming"!==r.processing_method){n(4,c=!0);try{const e=await fetch(\`/result?job_id=\${r.job_id}\`);if(e.ok){const t=await e.json();n(3,s=t.final||"No transcript available"),n(5,a=!0)}else n(3,s="Failed to fetch transcript")}catch(e){n(3,s="Error loading transcript: "+e.message)}finally{n(4,c=!1)}}}()}return e.$$set=e=>{"job"in e&&n(0,r=e.job)},[r,i,o,s,c,a,function(e){return d[e]||"bg-status-warning text-terminal-bg"},function(e){return u[e]||"mdi:clock"},async function(){if(confirm("Are you sure you want to delete this job?"))try{await async function(e){const t=l(ae),n=t.find(t=>t.job_id===e);if(!n)throw new Error("Job not found");const r=t.length;if("streaming"===n.processing_method){console.log("Deleting streaming job locally and from server");const n=t.filter(t=>t.job_id!==e);return ae.set(n),fetch("/delete-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e})}).then(t=>{t.ok?le.info("delete","Also deleted streaming job from server KV",{job_id:e}):le.debug("Streaming job not found on server (local only)",{job_id:e})}).catch(t=>{le.debug("Error deleting streaming job from server (likely local only)",{job_id:e,error:t.message})}),console.log("Jobs after streaming deletion:",n.length,"removed:",r-n.length),void le.info("delete","Deleted streaming job locally",{job_id:e,count_before:r,count_after:n.length})}const i=await fetch("/delete-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e})});if(!i.ok){const e=await i.json();throw console.error("Server deletion failed:",e),new Error(e.error||"Delete failed")}{console.log("Server deletion successful, removing from local array");const n=t.filter(t=>t.job_id!==e);ae.set(n),console.log("Jobs after server deletion:",n.length,"removed:",r-n.length),le.info("delete","Deleted server job",{job_id:e,count_before:r,count_after:n.length})}}(r.job_id)}catch(e){alert("Failed to delete job: "+e.message)}},async function(){if(!o){n(2,o=!0);try{await async function(e){const t=l(ae).find(t=>t.job_id===e);if(!t)throw new Error("Job not found");let n="";if("streaming"===t.processing_method)n=t.final_transcript||t.corrected_transcript||t.raw_transcript||"No transcript available";else{const t=await fetch("/result?job_id="+e);n=t.ok?(await t.json()).final||"No transcript available":"Failed to fetch transcript"}return await navigator.clipboard.writeText(n),n}(r.job_id),setTimeout(()=>n(2,o=!1),2e3)}catch(e){alert("Failed to copy transcript: "+e.message),n(2,o=!1)}}},async function(){try{await async function(e){const t=l(ae).find(t=>t.job_id===e);if(!t)throw new Error("Job not found");let n={...t};if("streaming"!==t.processing_method)try{const t=await fetch("/result?job_id="+e);if(t.ok){const e=await t.json();n.transcript_data=e}}catch(e){le.warn("Could not fetch full transcript data for JSON export",e)}const r=JSON.stringify(n,null,2);return await navigator.clipboard.writeText(r),r}(r.job_id)}catch(e){alert("Failed to copy job JSON: "+e.message)}},m,e=>"Enter"===e.key&&m()]}class Ct extends te{constructor(e){super(),ee(this,e,Tt,kt,o,{job:0})}}function Lt(e,t,n){const r=e.slice();return r[8]=t[n],r}function Mt(e){let t,n,r,i=e[1].filter(Ot).length+"";return{c(){t=f("span"),n=p(i),r=p(" Running"),x(t,"class","text-xs bg-status-info text-terminal-bg px-2 py-1 rounded")},m(e,i){u(e,t,i),d(t,n),d(t,r)},p(e,t){2&t&&i!==(i=e[1].filter(Ot).length+"")&&y(n,i)},d(e){e&&m(t)}}}function Et(e){let t,n,i=[],o=new Map,s=V(e[1]);const l=e=>e[8].job_id;for(let t=0;t<s.length;t+=1){let n=Lt(e,s,t),r=l(n);o.set(r,i[t]=Dt(r,n))}return{c(){t=f("div");for(let e=0;e<i.length;e+=1)i[e].c();x(t,"class","border border-x-2 border-terminal-border")},m(e,r){u(e,t,r);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);n=!0},p(e,n){2&n&&(s=V(e[1]),W(),i=function(e,t,n,i,o,s,l,c,a,d,u,m){let f=e.length,p=s.length,b=f;const g={};for(;b--;)g[e[b].key]=b;const h=[],x=new Map,_=new Map,y=[];for(b=p;b--;){const e=m(o,s,b),r=n(e);let i=l.get(r);i?y.push(()=>i.p(e,t)):(i=d(r,e),i.c()),x.set(r,h[b]=i),r in g&&_.set(r,Math.abs(b-g[r]))}const v=new Set,w=new Set;function $(e){H(e,1),e.m(c,u),l.set(e.key,e),u=e.first,p--}for(;f&&p;){const t=h[p-1],n=e[f-1],r=t.key,i=n.key;t===n?(u=t.first,f--,p--):x.has(i)?!l.has(r)||v.has(r)?$(t):w.has(i)?f--:_.get(r)>_.get(i)?(w.add(r),$(t)):(v.add(i),f--):(a(n,l),f--)}for(;f--;){const t=e[f];x.has(t.key)||a(t,l)}for(;p;)$(h[p-1]);return r(y),h}(i,n,l,0,e,s,o,t,K,Dt,null,Lt),G())},i(e){if(!n){for(let e=0;e<s.length;e+=1)H(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)q(i[e]);n=!1},d(e){e&&m(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function At(t){let n;return{c(){n=f("div"),n.textContent="No jobs yet",x(n,"class","py-10 px-5 text-center text-terminal-text-dim")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}function Dt(e,t){let n,r,i;return r=new Ct({props:{job:t[8]}}),{key:e,first:null,c(){n=g(),X(r.$$.fragment),this.first=n},m(e,t){u(e,n,t),Q(r,e,t),i=!0},p(e,n){t=e;const i={};2&n&&(i.job=t[8]),r.$set(i)},i(e){i||(H(r.$$.fragment,e),i=!0)},o(e){q(r.$$.fragment,e),i=!1},d(e){e&&m(n),Y(r,e)}}}function Ft(e){let t,n,i,o,s,l,c,a,g,v,w,$,j,S,T,C,L,M,E,A,D,F,O,z,P,N,R=e[1].length+"",I=e[2]?"Refreshing...":"Refresh",B=e[0]&&Mt(e);const J=[At,Et],U=[];function V(e,t){return 0===e[1].length?0:1}return F=V(e),O=U[F]=J[F](e),{c(){t=f("div"),n=f("div"),i=f("div"),o=f("span"),s=p("Jobs ("),l=p(R),c=p(")"),a=b(),B&&B.c(),g=b(),v=f("div"),w=f("button"),$=f("iconify-icon"),j=p("\\n        Delete All"),T=b(),C=f("button"),L=f("iconify-icon"),E=b(),A=p(I),D=b(),O.c(),x(o,"class","font-bold"),x(i,"class","flex items-center gap-2"),_($,"icon","mdi:delete-sweep"),_($,"class","text-sm"),w.disabled=S=0===e[1].length,x(w,"class","bg-terminal-bg-light border border-terminal-border text-status-error px-3 py-1 text-xs hover:bg-red-900/30 transition-colors flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed"),_(L,"icon",M=e[2]?"mdi:loading":"mdi:refresh"),_(L,"class","text-sm"),k(L,"animate-spin",e[2]),C.disabled=e[2],x(C,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-1 text-xs hover:bg-gray-700 transition-colors flex items-center gap-1"),x(v,"class","flex items-center gap-2"),x(n,"class","flex items-center justify-between py-2 border-b border-terminal-border")},m(r,m){u(r,t,m),d(t,n),d(n,i),d(i,o),d(o,s),d(o,l),d(o,c),d(i,a),B&&B.m(i,null),d(n,g),d(n,v),d(v,w),d(w,$),d(w,j),d(v,T),d(v,C),d(C,L),d(C,E),d(C,A),d(t,D),U[F].m(t,null),z=!0,P||(N=[h(w,"click",e[4]),h(C,"click",e[3])],P=!0)},p(e,[n]){(!z||2&n)&&R!==(R=e[1].length+"")&&y(l,R),e[0]?B?B.p(e,n):(B=Mt(e),B.c(),B.m(i,null)):B&&(B.d(1),B=null),(!z||2&n&&S!==(S=0===e[1].length))&&(w.disabled=S),(!z||4&n&&M!==(M=e[2]?"mdi:loading":"mdi:refresh"))&&_(L,"icon",M),(!z||4&n)&&k(L,"animate-spin",e[2]),(!z||4&n)&&I!==(I=e[2]?"Refreshing...":"Refresh")&&y(A,I),(!z||4&n)&&(C.disabled=e[2]);let r=F;F=V(e),F===r?U[F].p(e,n):(W(),q(U[r],1,1,()=>{U[r]=null}),G(),O=U[F],O?O.p(e,n):(O=U[F]=J[F](e),O.c()),H(O,1),O.m(t,null))},i(e){z||(H(O),z=!0)},o(e){q(O),z=!1},d(e){e&&m(t),B&&B.d(),U[F].d(),P=!1,r(N)}}}const Ot=e=>"processing"===e.status||"uploaded"===e.status||"awaiting_upload"===e.status;function zt(e,t,n){let r,i;c(e,ae,e=>n(1,i=e));let o=!1,s=null;var a;function d(){s||n(5,s=setInterval(async()=>{if(r)try{await we()}catch(e){console.error("Auto-refresh failed:",e)}},3e3))}function u(){s&&(clearInterval(s),n(5,s=null))}return L(()=>{d()}),a=()=>{u()},C().$$.on_destroy.push(a),e.$$.update=()=>{2&e.$$.dirty&&n(0,r=i.some(e=>"processing"===e.status||"uploaded"===e.status||"awaiting_upload"===e.status)),33&e.$$.dirty&&(r?d():!r&&s&&setTimeout(()=>{r||u()},1e4))},[r,i,o,async function(){n(2,o=!0);try{await we(),setTimeout(()=>n(2,o=!1),1500)}catch(e){console.error("Refresh failed:",e),n(2,o=!1)}},async function(){if(confirm("Are you sure you want to delete all jobs? This action cannot be undone."))try{await async function(){const e=l(ae);if(0===e.length)return;le.info("delete","Starting delete all jobs operation",{total_jobs:e.length});const t=e.filter(e=>"streaming"===e.processing_method),n=e.filter(e=>"streaming"!==e.processing_method);if(ae.set([]),t.length>0&&(le.info("delete","Deleting streaming jobs from server (background)",{count:t.length}),t.forEach(e=>{fetch("/delete-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e.job_id})}).catch(t=>{le.debug("Background streaming job deletion failed (expected for local-only jobs)",{job_id:e.job_id,error:t.message})})})),n.length>0){le.info("delete","Deleting server jobs",{count:n.length});const e=n.map(e=>fetch("/delete-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e.job_id})}).catch(t=>(le.error("Failed to delete server job",t,{job_id:e.job_id}),null)));await Promise.allSettled(e)}le.complete("Delete all jobs completed",{streaming_jobs:t.length,server_jobs:n.length,total:e.length})}(),console.log("All jobs deleted from API.")}catch(e){console.error("Failed to delete all jobs:",e)}},s]}class Pt extends te{constructor(e){super(),ee(this,e,zt,Ft,o,{})}}function Nt(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="text-md text-terminal-text-dim mb-2">Groq Whisper XL - Universal Audio Transcription Tool</div> <div class="flex justify-center"><a href="https://groq.com" target="_blank" rel="noopener noreferrer"><img class="w-40 mt-8" src="https://console.groq.com/powered-by-groq.svg" alt="Powered by Groq for fast inference."/></a></div>',x(n,"class","mt-4 p-3 text-center")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}class Rt extends te{constructor(e){super(),ee(this,e,null,Nt,o,{})}}function It(t){let n,r,i,o,s,l,c,a,p,g;return r=new re({}),o=new tt({}),l=new Pt({}),p=new Rt({}),{c(){n=f("main"),X(r.$$.fragment),i=b(),X(o.$$.fragment),s=b(),X(l.$$.fragment),c=b(),a=f("div"),X(p.$$.fragment),x(n,"class","max-w-6xl mx-auto p-5 bg-terminal-bg-light"),x(a,"class","mb-8")},m(e,t){u(e,n,t),Q(r,n,null),d(n,i),Q(o,n,null),d(n,s),Q(l,n,null),u(e,c,t),u(e,a,t),Q(p,a,null),g=!0},p:e,i(e){g||(H(r.$$.fragment,e),H(o.$$.fragment,e),H(l.$$.fragment,e),H(p.$$.fragment,e),g=!0)},o(e){q(r.$$.fragment,e),q(o.$$.fragment,e),q(l.$$.fragment,e),q(p.$$.fragment,e),g=!1},d(e){e&&(m(n),m(c),m(a)),Y(r),Y(o),Y(l),Y(p)}}}function Bt(e){return L(()=>{we()}),[]}return new class extends te{constructor(e){super(),ee(this,e,Bt,It,o,{})}}({target:document.getElementById("app")})}();
`
};
