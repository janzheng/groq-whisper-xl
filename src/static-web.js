// Embedded static files for the web interface
// This file is auto-generated by scripts/build-static.js - do not edit manually!

export const STATIC_FILES = {
  '/': `<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Groq Whisper XL - Audio Transcription</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'terminal-bg': '#1a1a1a',
              'terminal-bg-light': '#2d2d2d',
              'terminal-text': '#ffffff',
              'terminal-text-dim': '#b0b0b0',
              'terminal-accent': '#d1d5db',
              'terminal-border': '#444444',
              'status-success': '#00ff00',
              'status-error': '#ff4444',
              'status-warning': '#ffaa00',
              'status-info': '#44aaff',
            }
          }
        }
      }
    </script>
    <style>
      body {
        font-family: 'Courier New', 'Monaco', 'Menlo', monospace;
      }
      
      ::-webkit-scrollbar {
        width: 8px;
      }
      
      ::-webkit-scrollbar-track {
        background: #1a1a1a;
      }
      
      ::-webkit-scrollbar-thumb {
        background: #444444;
        border-radius: 4px;
      }
      
      ::-webkit-scrollbar-thumb:hover {
        background: #666666;
      }
      
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }
      
      .animate-pulse-slow {
        animation: pulse 2s infinite;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      .animate-fade-in {
        animation: fadeIn 0.3s ease-in;
      }
      
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      
      .animate-spin {
        animation: spin 1s linear infinite;
      }
    </style>
    <script type="module" src="/assets/app.js"></script>
  </head>
  <body class="bg-terminal-bg text-terminal-text overflow-x-hidden">
    <div id="app"></div>
  </body>
</html> `,
  
  '/assets/app.js': `var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t){for(const e of n)e(void 0);return e}const i=t.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function l(e){let t;return s(e,e=>t=e)(),t}function c(e,t,n){e.$$.on_destroy.push(s(t,n))}function a(e,t,n){return e.set(n),t}function d(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function b(){return p(" ")}function g(){return p("")}function h(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e,t,n){const i=t.toLowerCase();i in e?e[i]="boolean"==typeof e[i]&&""===n||n:t in e?e[t]="boolean"==typeof e[t]&&""===n||n:x(e,t,n)}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function v(e,t){e.value=null==t?"":t}function w(e,t,n,i){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function $(e,t,n){for(let n=0;n<e.options.length;n+=1){const i=e.options[n];if(i.__value===t)return void(i.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function j(e){const t=e.querySelector(":checked");return t&&t.__value}function k(e,t,n){e.classList.toggle(t,!!n)}let S;function C(e){S=e}function L(){if(!S)throw new Error("Function called outside component initialization");return S}function T(e){L().$$.on_mount.push(e)}function M(){const e=L();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}(t,n,{cancelable:i});return r.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}const E=[],A=[];let D=[];const F=[],O=Promise.resolve();let P=!1;function z(e){D.push(e)}const N=new Set;let R=0;function I(){if(0!==R)return;const e=S;do{try{for(;R<E.length;){const e=E[R];R++,C(e),B(e.$$)}}catch(e){throw E.length=0,R=0,e}for(C(null),E.length=0,R=0;A.length;)A.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];N.has(t)||(N.add(t),t())}D.length=0}while(E.length);for(;F.length;)F.pop()();P=!1,N.clear(),C(e)}function B(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(z)}}const J=new Set;let U;function W(){U={r:0,c:[],p:U}}function G(){U.r||i(U.c),U=U.p}function H(e,t){e&&e.i&&(J.delete(e),e.i(t))}function q(e,t,n,i){if(e&&e.o){if(J.has(e))return;J.add(e),U.c.push(()=>{J.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function V(e){return void 0!==e?.length?e:Array.from(e)}function K(e,t){q(e,1,1,()=>{t.delete(e.key)})}function X(e){e&&e.c()}function Q(e,n,o){const{fragment:s,after_update:l}=e.$$;s&&s.m(n,o),z(()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):i(n),e.$$.on_mount=[]}),l.forEach(z)}function Y(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];D.forEach(i=>-1===e.indexOf(i)?t.push(i):n.push(i)),n.forEach(e=>e()),D=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(E.push(e),P||(P=!0,O.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(t,r,o,s,l,c,a=null,d=[-1]){const u=S;C(t);const f=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(u?u.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||u.$$.root};a&&a(f.root);let p=!1;if(f.ctx=o?o(t,r.props||{},(e,n,...i)=>{const r=i.length?i[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),p&&Z(t,e)),n}):[],f.update(),p=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);f.fragment&&f.fragment.l(e),e.forEach(m)}else f.fragment&&f.fragment.c();r.intro&&H(t.$$.fragment),Q(t,r.target,r.anchor),I()}C(u)}class te{$$=void 0;$$set=void 0;$destroy(){Y(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const e=i.indexOf(n);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const ne=[];function ie(t,n=e){let i;const r=new Set;function s(e){if(o(t,e)&&(t=e,i)){const e=!ne.length;for(const e of r)e[1](),ne.push(e,t);if(e){for(let e=0;e<ne.length;e+=2)ne[e][0](ne[e+1]);ne.length=0}}}function l(e){s(e(t))}return{set:s,update:l,subscribe:function(o,c=e){const a=[o,c];return r.add(a),1===r.size&&(i=n(s,l)||e),o(t),()=>{r.delete(a),0===r.size&&i&&(i(),i=null)}}}}class re{static levels={DEBUG:0,INFO:1,WARN:2,ERROR:3};static emojis={start:"🚀",processing:"🔄",complete:"✅",failed:"❌",upload:"📤",download:"📥",file:"📁",delete:"🗑️",audio:"🎵",transcribe:"🎤",chunk:"🧩",stream:"🌊",llm:"🧠",api:"📡",webhook:"🔗",url:"🌐",info:"ℹ️",warning:"⚠️",error:"❌",debug:"🔍",stats:"📊",time:"⏱️",progress:"📈"};constructor(e="WEB",t=re.levels.INFO){this.context=e,this.level=t}_formatMessage(e,t,n=null){(new Date).toLocaleTimeString();const i=\`\${e} [\${this.context}]\`;return n&&Object.keys(n).length,\`\${i} \${t}\`}debug(e,t=null){if(this.level<=re.levels.DEBUG){const n=this._formatMessage(re.emojis.debug,e,t);console.log(n,t)}}info(e,t,n=null){if(this.level<=re.levels.INFO){const i=re.emojis[e]||e,r=this._formatMessage(i,t,n);console.log(r,n)}}warn(e,t=null){if(this.level<=re.levels.WARN){const n=this._formatMessage(re.emojis.warning,e,t);console.warn(n,t)}}error(e,t=null,n=null){if(this.level<=re.levels.ERROR){const i=this._formatMessage(re.emojis.error,e,n);console.error(i,t,n)}}upload(e,t=null){this.info("upload",e,t)}download(e,t=null){this.info("download",e,t)}processing(e,t=null){this.info("processing",e,t)}complete(e,t=null){this.info("complete",e,t)}chunk(e,t=null){this.info("chunk",e,t)}transcribe(e,t=null){this.info("transcribe",e,t)}llm(e,t=null){this.info("llm",e,t)}api(e,t=null){this.info("api",e,t)}stats(e,t=null){this.info("stats",e,t)}stream(e,t=null){this.info("stream",e,t)}}const oe=new re("WEB",re.levels.INFO),se=new re("STREAM",re.levels.INFO),le=ie([]),ce=ie(!1),ae=ie(!1),de=ie(!1),ue=ie(""),me=ie(Date.now()),fe=ie(0),pe=ie(""),be=ie(0),ge=ie(0),he=ie(""),xe=ie("disabled");function _e(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}function ye(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="flex items-center gap-2 text-lg font-bold"><iconify-icon icon="mdi:lightning-bolt" class="text-terminal-accent"></iconify-icon> <span class="text-terminal-accent">Groq Whisper XL</span></div> <div class="text-terminal-text-dim mt-2">Fast, accurate audio transcription powered by Groq&#39;s Whisper API with intelligent chunking and LLM enhancement.</div> <div class="mt-3"><div class="space-y-1 text-sm"><div class="flex items-center gap-2 text-terminal-text-dim"><iconify-icon icon="mdi:file-music" class="text-xs"></iconify-icon> <span>Universal file support up to 1GB with smart processing</span></div> <div class="flex items-center gap-2 text-terminal-text-dim"><iconify-icon icon="mdi:brain" class="text-xs"></iconify-icon> <span>AI-powered error correction for improved accuracy</span></div> <div class="flex items-center gap-2 text-terminal-text-dim"><iconify-icon icon="mdi:play-speed" class="text-xs"></iconify-icon> <span>Real-time streaming transcription with live results</span></div></div></div>',x(n,"class","border border-terminal-border bg-terminal-bg-light p-4 mb-4")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}class ve extends te{constructor(e){super(),ee(this,e,null,ye,o,{})}}async function we(){try{console.log("=== FETCH JOBS CALLED ===");const e=l(le);console.log("Jobs before fetch:",e.length,e.map(e=>({id:e.job_id.slice(0,8)+"...",method:e.processing_method})));const t=await fetch("/jobs");if(t.ok){const n=(await t.json()).jobs||[];console.log("Server returned jobs:",n.length,n.map(e=>({id:e.job_id.slice(0,8)+"...",method:e.processing_method||"direct"})));const i=new Set(e.map(e=>e.job_id)),r=n.filter(e=>!i.has(e.job_id));console.log("New server jobs to add:",r.length,r.map(e=>({id:e.job_id.slice(0,8)+"...",method:e.processing_method||"direct"})));const o=[];for(const t of e){const e=n.find(e=>e.job_id===t.job_id);e?o.push({...t,...e,..."streaming"===t.processing_method?{raw_transcript:t.raw_transcript,corrected_transcript:t.corrected_transcript,final_transcript:t.final_transcript||e.final_transcript}:{}}):o.push(t)}const s=[...o,...r],l=[],c=new Set;for(const e of s)c.has(e.job_id)||(c.add(e.job_id),l.push(e));le.set(l),console.log("Jobs after fetch and deduplication:",l.length,l.map(e=>({id:e.job_id.slice(0,8)+"...",method:e.processing_method}))),oe.info("api","Fetched jobs",{server_jobs:n.length,new_server_jobs:r.length,local_jobs_preserved:e.length,total:l.length,duplicates_removed:s.length-l.length})}}catch(e){console.error("Fetch jobs error:",e),oe.error("Failed to fetch jobs",e)}}function $e(e){let t,n,i;return{c(){t=f("input"),x(t,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),x(t,"type","url"),x(t,"placeholder","https://example.com/audio.mp3")},m(r,o){u(r,t,o),v(t,e[1]),n||(i=h(t,"input",e[20]),n=!0)},p(e,n){2&n&&t.value!==e[1]&&v(t,e[1])},d(e){e&&m(t),n=!1,i()}}}function je(e){let t,n,r,o,s,l,c,a,g,v,w,$,j,S,C=e[6].title+"",L=e[6].subtitle+"",T=e[6].description&&ke(e);return{c(){t=f("div"),n=f("iconify-icon"),o=b(),s=f("div"),l=p(C),c=b(),a=f("div"),g=p(L),v=b(),T&&T.c(),w=b(),$=f("input"),_(n,"icon",r=e[6].icon),_(n,"class","text-3xl mb-2"),k(n,"text-terminal-text-dim",!e[6].success&&!e[6].error),k(n,"text-terminal-accent","mdi:file-music"===e[6].icon),k(n,"animate-spin","mdi:loading"===e[6].icon),x(s,"class","font-bold"),x(a,"class","text-xs"),k(a,"text-terminal-text-dim",!e[6].success&&!e[6].error),k(a,"text-terminal-accent","mdi:file-music"===e[6].icon),x(t,"role","button"),x(t,"tabindex","0"),x(t,"class","border-2 border-dashed border-terminal-border p-6 text-center cursor-pointer transition-all hover:border-terminal-accent hover:bg-gray-900/20"),k(t,"text-status-success",e[6].success),k(t,"text-status-error",e[6].error),x($,"type","file"),x($,"accept","audio/*,video/*"),x($,"class","hidden")},m(i,r){u(i,t,r),d(t,n),d(t,o),d(t,s),d(s,l),d(t,c),d(t,a),d(a,g),d(t,v),T&&T.m(t,null),e[17](t),u(i,w,r),u(i,$,r),e[19]($),j||(S=[h(t,"click",e[12]),h(t,"keydown",e[18]),h(t,"dragover",e[8]),h(t,"dragleave",e[9]),h(t,"drop",e[10]),h($,"change",e[11])],j=!0)},p(e,i){64&i&&r!==(r=e[6].icon)&&_(n,"icon",r),64&i&&k(n,"text-terminal-text-dim",!e[6].success&&!e[6].error),64&i&&k(n,"text-terminal-accent","mdi:file-music"===e[6].icon),64&i&&k(n,"animate-spin","mdi:loading"===e[6].icon),64&i&&C!==(C=e[6].title+"")&&y(l,C),64&i&&L!==(L=e[6].subtitle+"")&&y(g,L),64&i&&k(a,"text-terminal-text-dim",!e[6].success&&!e[6].error),64&i&&k(a,"text-terminal-accent","mdi:file-music"===e[6].icon),e[6].description?T?T.p(e,i):(T=ke(e),T.c(),T.m(t,null)):T&&(T.d(1),T=null),64&i&&k(t,"text-status-success",e[6].success),64&i&&k(t,"text-status-error",e[6].error)},d(n){n&&(m(t),m(w),m($)),T&&T.d(),e[17](null),e[19](null),j=!1,i(S)}}}function ke(e){let t,n,i=e[6].description+"";return{c(){t=f("div"),n=p(i),x(t,"class","text-xs text-terminal-text-dim")},m(e,i){u(e,t,i),d(t,n)},p(e,t){64&t&&i!==(i=e[6].description+"")&&y(n,i)},d(e){e&&m(t)}}}function Se(e){let t;return{c(){t=p("Transcribe Audio")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Ce(e){let t;return{c(){t=p("Processing...")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Le(t){let n,r,o,s,l,c,a,p,g,y,w,$,j,S,C,L,T,M,E,A,D,F,O,P,z,N,R,I,B,J,U,W,G,H,q,V,K,X;function Q(e,t){return"file"===e[0]?je:"url"===e[0]?$e:void 0}let Y=Q(t),Z=Y&&Y(t);function ee(e,t){return e[7]?Ce:Se}let te=ee(t),ne=te(t);return{c(){n=f("div"),r=f("div"),r.innerHTML='<iconify-icon icon="mdi:rocket-launch" class="text-lg"></iconify-icon> <span>Direct Upload &amp; Processing</span>',o=b(),s=f("div"),s.textContent='Upload your file and get notified when processing is complete. Files are processed in the background - check "Running Jobs" for progress.',l=b(),c=f("div"),a=f("div"),a.textContent="Source:",p=b(),g=f("div"),y=f("button"),y.innerHTML='<iconify-icon icon="mdi:file-outline"></iconify-icon> File',w=b(),$=f("button"),$.innerHTML='<iconify-icon icon="mdi:web"></iconify-icon> URL',j=b(),Z&&Z.c(),S=b(),C=f("div"),L=f("div"),L.textContent="Settings:",T=b(),M=f("div"),E=f("div"),A=f("label"),D=f("input"),F=b(),O=f("iconify-icon"),P=b(),z=f("span"),z.textContent="LLM Error Correction",N=b(),R=f("span"),R.textContent="(Improves accuracy)",I=b(),B=f("div"),J=f("label"),J.textContent="Webhook URL (optional):",U=b(),W=f("input"),G=b(),H=f("button"),q=f("iconify-icon"),V=b(),ne.c(),x(r,"class","flex items-center gap-2 mb-4 font-bold text-terminal-accent"),x(s,"class","text-xs text-terminal-text-dim mb-4"),x(a,"class","font-bold mb-2"),x(y,"class","border border-terminal-border text-terminal-text px-4 py-2 hover:bg-gray-700 transition-colors flex-1 flex items-center justify-center gap-2"),k(y,"bg-gray-700","file"===t[0]),k(y,"bg-terminal-bg","file"!==t[0]),x($,"class","border border-terminal-border text-terminal-text px-4 py-2 hover:bg-gray-700 transition-colors flex-1 flex items-center justify-center gap-2"),k($,"bg-gray-700","url"===t[0]),k($,"bg-terminal-bg","url"!==t[0]),x(g,"class","flex gap-2 mb-3"),x(c,"class","mb-4"),x(L,"class","font-bold mb-2"),x(D,"type","checkbox"),x(D,"class","w-4 h-4"),_(O,"icon","mdi:brain"),_(O,"class","text-terminal-accent"),x(z,"class","text-terminal-accent"),x(R,"class","text-terminal-text-dim"),x(A,"class","flex items-center gap-2 cursor-pointer"),x(J,"for","webhook-url"),x(J,"class","text-terminal-text-dim block mb-1"),x(W,"id","webhook-url"),x(W,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),x(W,"type","url"),x(W,"placeholder","https://your-webhook.com/endpoint"),x(M,"class","space-y-3"),x(C,"class","mb-4 flex-1"),_(q,"icon","mdi:microphone"),H.disabled=t[7],x(H,"class","bg-terminal-accent text-terminal-bg px-4 py-2 hover:bg-gray-300 transition-colors w-full font-bold flex items-center justify-center gap-2"),k(H,"opacity-50",t[7]),x(n,"class","border border-terminal-border p-4 flex flex-col")},m(e,i){u(e,n,i),d(n,r),d(n,o),d(n,s),d(n,l),d(n,c),d(c,a),d(c,p),d(c,g),d(g,y),d(g,w),d(g,$),d(c,j),Z&&Z.m(c,null),d(n,S),d(n,C),d(C,L),d(C,T),d(C,M),d(M,E),d(E,A),d(A,D),D.checked=t[2],d(A,F),d(A,O),d(A,P),d(A,z),d(A,N),d(A,R),d(M,I),d(M,B),d(B,J),d(B,U),d(B,W),v(W,t[3]),d(n,G),d(n,H),d(H,q),d(H,V),ne.m(H,null),K||(X=[h(y,"click",t[15]),h($,"click",t[16]),h(D,"change",t[21]),h(W,"input",t[22]),h(H,"click",t[13])],K=!0)},p(e,[t]){1&t&&k(y,"bg-gray-700","file"===e[0]),1&t&&k(y,"bg-terminal-bg","file"!==e[0]),1&t&&k($,"bg-gray-700","url"===e[0]),1&t&&k($,"bg-terminal-bg","url"!==e[0]),Y===(Y=Q(e))&&Z?Z.p(e,t):(Z&&Z.d(1),Z=Y&&Y(e),Z&&(Z.c(),Z.m(c,null))),4&t&&(D.checked=e[2]),8&t&&W.value!==e[3]&&v(W,e[3]),te!==(te=ee(e))&&(ne.d(1),ne=te(e),ne&&(ne.c(),ne.m(H,null))),128&t&&(H.disabled=e[7]),128&t&&k(H,"opacity-50",e[7])},i:e,o:e,d(e){e&&m(n),Z&&Z.d(),ne.d(),K=!1,i(X)}}}function Te(e,t,n){let i;c(e,ce,e=>n(7,i=e));let r,o,s="file",d=null,u="",m=!1,f="",p={icon:"mdi:file-plus",title:"Drop files here or click to browse",subtitle:"MP3, WAV, M4A, FLAC, etc. (up to 1GB)"};function b(e){n(6,p={icon:"mdi:file-music",title:e.name,subtitle:\`Ready to transcribe (\${_e(e.size)})\`,description:'Click "Transcribe Audio" to start'}),d=e}function g(){n(6,p={icon:"mdi:file-plus",title:"Drop files here or click to browse",subtitle:"MP3, WAV, M4A, FLAC, etc. (up to 1GB)"}),d=null,o&&n(5,o.value="",o)}function h(){r&&(r.classList.remove("border-terminal-accent","bg-green-900/20"),r.classList.add("border-terminal-border"))}function x(){o&&o.click()}function _(e){n(0,s=e),"file"===e&&g()}return[s,u,m,f,r,o,p,i,function(e){e.preventDefault(),r&&(r.classList.add("border-terminal-accent","bg-green-900/20"),r.classList.remove("border-terminal-border"))},h,function(e){e.preventDefault(),h();const t=Array.from(e.dataTransfer.files);t.length>0&&b(t[0])},function(e){const t=Array.from(e.target.files);t.length>0&&b(t[0])},x,async function(){if(!i)if("file"===s)if(d)try{a(ce,i=!0,i),n(6,p={icon:"mdi:upload",title:\`Uploading \${d.name}...\`,subtitle:\`\${_e(d.size)} - Please wait\`}),await new Promise(e=>setTimeout(e,300)),n(6,p={icon:"mdi:loading",title:\`Processing \${d.name}...\`,subtitle:"Transcribing audio with Groq Whisper"}),await async function(e,t,n){const i=new FormData;i.append("file",e),i.append("use_llm",t.toString()),n&&i.append("webhook_url",n);const r=await fetch("/upload",{method:"POST",body:i});if(r.ok){const e=await r.json(),n=l(le),i={job_id:e.job_id,filename:e.filename,status:"processing",file_size:e.file_size,processing_method:e.processing_method,upload_method:"direct",use_llm:t,created_at:(new Date).toISOString()};return le.set([i,...n]),e}{const e=await r.json();throw new Error(e.error||"Upload failed")}}(d,m,f||null),n(6,p={icon:"mdi:check",title:\`\${d.name} uploaded successfully!\`,subtitle:'Check "Jobs" section for progress',success:!0}),setTimeout(()=>{g()},3e3)}catch(e){n(6,p={icon:"mdi:alert-circle",title:"Upload failed",subtitle:e.message,error:!0}),setTimeout(()=>{g()},3e3)}finally{a(ce,i=!1,i)}else x();else if("url"===s)if(u.trim())try{a(ce,i=!0,i),await async function(e,t,n){const i={url:e,use_llm:t};n&&(i.webhook_url=n);const r=await fetch("/upload-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(r.ok){const e=await r.json(),n=l(le),i={job_id:e.job_id,filename:e.filename,status:"processing",file_size:e.file_size,processing_method:e.processing_method,upload_method:"url",source_url:e.source_url,use_llm:t,created_at:(new Date).toISOString()};return le.set([i,...n]),e}{const e=await r.json();throw new Error(e.error||"URL upload failed")}}(u.trim(),m,f||null),n(1,u="")}catch(e){alert("Upload failed: "+e.message)}finally{a(ce,i=!1,i)}else alert("Please enter an audio URL first")},_,()=>_("file"),()=>_("url"),function(e){A[e?"unshift":"push"](()=>{r=e,n(4,r)})},e=>"Enter"===e.key&&x(),function(e){A[e?"unshift":"push"](()=>{o=e,n(5,o)})},function(){u=this.value,n(1,u)},function(){m=this.checked,n(2,m)},function(){f=this.value,n(3,f)}]}class Me extends te{constructor(e){super(),ee(this,e,Te,Le,o,{})}}function Ee(e){let t,n,i;return{c(){t=f("input"),t.disabled=e[7],x(t,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),x(t,"type","url"),x(t,"placeholder","https://example.com/audio.mp3"),k(t,"opacity-50",e[7])},m(r,o){u(r,t,o),v(t,e[1]),n||(i=h(t,"input",e[22]),n=!0)},p(e,n){128&n[0]&&(t.disabled=e[7]),2&n[0]&&t.value!==e[1]&&v(t,e[1]),128&n[0]&&k(t,"opacity-50",e[7])},d(e){e&&m(t),n=!1,i()}}}function Ae(e){let t,n,r,o,s,l,c,a,g,v,w,$,j,S,C=e[6].title+"",L=e[6].subtitle+"",T=e[6].description&&De(e);return{c(){t=f("div"),n=f("iconify-icon"),o=b(),s=f("div"),l=p(C),c=b(),a=f("div"),g=p(L),v=b(),T&&T.c(),w=b(),$=f("input"),_(n,"icon",r=e[6].icon),_(n,"class","text-3xl mb-2"),k(n,"text-terminal-text-dim",!e[6].success&&!e[6].error),k(n,"text-terminal-accent","mdi:file-music"===e[6].icon),k(n,"animate-spin","mdi:loading"===e[6].icon),x(s,"class","font-bold"),x(a,"class","text-xs"),k(a,"text-terminal-text-dim",!e[6].success&&!e[6].error),k(a,"text-terminal-accent","mdi:file-music"===e[6].icon),x(t,"role","button"),x(t,"tabindex","0"),x(t,"class","border-2 border-dashed border-terminal-border p-6 text-center cursor-pointer transition-all hover:border-terminal-accent hover:bg-gray-900/20"),k(t,"pointer-events-none",e[7]),k(t,"opacity-50",e[7]),x($,"type","file"),x($,"accept","audio/*,video/*"),x($,"class","hidden"),$.disabled=e[7]},m(i,r){u(i,t,r),d(t,n),d(t,o),d(t,s),d(s,l),d(t,c),d(t,a),d(a,g),d(t,v),T&&T.m(t,null),e[19](t),u(i,w,r),u(i,$,r),e[21]($),j||(S=[h(t,"click",e[12]),h(t,"keydown",e[20]),h(t,"dragover",e[8]),h(t,"dragleave",e[9]),h(t,"drop",e[10]),h($,"change",e[11])],j=!0)},p(e,i){64&i[0]&&r!==(r=e[6].icon)&&_(n,"icon",r),64&i[0]&&k(n,"text-terminal-text-dim",!e[6].success&&!e[6].error),64&i[0]&&k(n,"text-terminal-accent","mdi:file-music"===e[6].icon),64&i[0]&&k(n,"animate-spin","mdi:loading"===e[6].icon),64&i[0]&&C!==(C=e[6].title+"")&&y(l,C),64&i[0]&&L!==(L=e[6].subtitle+"")&&y(g,L),64&i[0]&&k(a,"text-terminal-text-dim",!e[6].success&&!e[6].error),64&i[0]&&k(a,"text-terminal-accent","mdi:file-music"===e[6].icon),e[6].description?T?T.p(e,i):(T=De(e),T.c(),T.m(t,null)):T&&(T.d(1),T=null),128&i[0]&&k(t,"pointer-events-none",e[7]),128&i[0]&&k(t,"opacity-50",e[7]),128&i[0]&&($.disabled=e[7])},d(n){n&&(m(t),m(w),m($)),T&&T.d(),e[19](null),e[21](null),j=!1,i(S)}}}function De(e){let t,n,i=e[6].description+"";return{c(){t=f("div"),n=p(i),x(t,"class","text-xs text-terminal-text-dim")},m(e,i){u(e,t,i),d(t,n)},p(e,t){64&t[0]&&i!==(i=e[6].description+"")&&y(n,i)},d(e){e&&m(t)}}}function Fe(e){let t;return{c(){t=f("iconify-icon"),_(t,"icon","mdi:waveform")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Oe(e){let t,n;return{c(){t=f("iconify-icon"),n=p(" Stop Streaming"),_(t,"icon","mdi:stop")},m(e,i){u(e,t,i),u(e,n,i)},d(e){e&&(m(t),m(n))}}}function Pe(t){let n;return{c(){n=p("Stop Streaming")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function ze(t){let n,i=t[14]()+"";return{c(){n=p(i)},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function Ne(t){let n,o,s,l,c,a,g,y,w,j,S,C,L,T,M,E,A,D,F,O,P,N,R,I,B,J,U,W,G,H,q,V,K,X,Q,Y,Z,ee,te,ne,ie,re,oe;function se(e,t){return"file"===e[0]?Ae:"url"===e[0]?Ee:void 0}let le=se(t),ce=le&&le(t);function ae(e,t){return e[7]?Oe:Fe}let de=ae(t),ue=de(t);function me(e,t){return e[7]?Pe:ze}let fe=me(t),pe=fe(t);return{c(){n=f("div"),o=f("div"),o.innerHTML='<iconify-icon icon="mdi:waveform" class="text-lg"></iconify-icon> <span>Streaming Transcription</span>',s=b(),l=f("div"),l.textContent="Real-time processing with live transcript streaming. See results as they're generated - perfect for demos and testing.",c=b(),a=f("div"),g=f("div"),g.textContent="Source:",y=b(),w=f("div"),j=f("button"),S=f("iconify-icon"),C=p(" File"),L=b(),T=f("button"),M=f("iconify-icon"),E=p(" URL"),A=b(),ce&&ce.c(),D=b(),F=f("div"),O=f("div"),O.textContent="Settings:",P=b(),N=f("div"),R=f("div"),I=f("label"),I.textContent="Chunk size:",B=b(),J=f("select"),U=f("option"),U.textContent="0.25MB (Ultra-fast)",W=f("option"),W.textContent="0.5MB (Fast)",G=f("option"),G.textContent="1MB (Balanced)",H=f("option"),H.textContent="2MB (Fewer API calls)",q=b(),V=f("div"),K=f("label"),K.textContent="LLM correction:",X=b(),Q=f("select"),Y=f("option"),Y.textContent="Disabled (fastest)",Z=f("option"),Z.textContent="Per-chunk (real-time)",ee=f("option"),ee.textContent="Post-process (better quality)",te=b(),ne=f("button"),ue.c(),ie=b(),pe.c(),x(o,"class","flex items-center gap-2 mb-4 font-bold text-terminal-accent"),x(l,"class","text-xs text-terminal-text-dim mb-4"),x(g,"class","font-bold mb-2"),_(S,"icon","mdi:file-outline"),j.disabled=t[7],x(j,"class","border border-terminal-border text-terminal-text px-4 py-2 hover:bg-gray-700 transition-colors flex-1 flex items-center justify-center gap-2"),k(j,"bg-gray-700","file"===t[0]),k(j,"bg-terminal-bg","file"!==t[0]),k(j,"opacity-50",t[7]),_(M,"icon","mdi:web"),T.disabled=t[7],x(T,"class","border border-terminal-border text-terminal-text px-4 py-2 hover:bg-gray-700 transition-colors flex-1 flex items-center justify-center gap-2"),k(T,"bg-gray-700","url"===t[0]),k(T,"bg-terminal-bg","url"!==t[0]),k(T,"opacity-50",t[7]),x(w,"class","flex gap-2 mb-3"),x(a,"class","mb-4"),x(O,"class","font-bold mb-2"),x(I,"for","chunk-size"),x(I,"class","text-terminal-text-dim block mb-1"),U.__value=.25,v(U,U.__value),W.__value=.5,v(W,W.__value),G.__value=1,v(G,G.__value),H.__value=2,v(H,H.__value),x(J,"id","chunk-size"),J.disabled=t[7],x(J,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),void 0===t[2]&&z(()=>t[23].call(J)),k(J,"opacity-50",t[7]),x(K,"for","llm-mode"),x(K,"class","text-terminal-text-dim block mb-1"),Y.__value="disabled",v(Y,Y.__value),Z.__value="per_chunk",v(Z,Z.__value),ee.__value="post_process",v(ee,ee.__value),x(Q,"id","llm-mode"),Q.disabled=t[7],x(Q,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-2 w-full focus:outline-none focus:border-terminal-accent"),void 0===t[3]&&z(()=>t[24].call(Q)),k(Q,"opacity-50",t[7]),x(N,"class","space-y-3"),x(F,"class","mb-4 flex-1"),x(ne,"class","px-4 py-2 transition-colors w-full font-bold flex items-center justify-center gap-2"),k(ne,"bg-status-info",!t[7]),k(ne,"bg-status-error",t[7]),k(ne,"text-terminal-bg",!t[7]||t[7]),k(ne,"hover:bg-blue-600",!t[7]),k(ne,"hover:bg-red-600",t[7]),x(n,"class","border border-terminal-border p-4 flex flex-col")},m(e,i){u(e,n,i),d(n,o),d(n,s),d(n,l),d(n,c),d(n,a),d(a,g),d(a,y),d(a,w),d(w,j),d(j,S),d(j,C),d(w,L),d(w,T),d(T,M),d(T,E),d(a,A),ce&&ce.m(a,null),d(n,D),d(n,F),d(F,O),d(F,P),d(F,N),d(N,R),d(R,I),d(R,B),d(R,J),d(J,U),d(J,W),d(J,G),d(J,H),$(J,t[2],!0),d(N,q),d(N,V),d(V,K),d(V,X),d(V,Q),d(Q,Y),d(Q,Z),d(Q,ee),$(Q,t[3],!0),d(n,te),d(n,ne),ue.m(ne,null),d(ne,ie),pe.m(ne,null),re||(oe=[h(j,"click",t[17]),h(T,"click",t[18]),h(J,"change",t[23]),h(Q,"change",t[24]),h(ne,"click",function(){r(t[7]?t[16]:t[15])&&(t[7]?t[16]:t[15]).apply(this,arguments)})],re=!0)},p(e,n){t=e,128&n[0]&&(j.disabled=t[7]),1&n[0]&&k(j,"bg-gray-700","file"===t[0]),1&n[0]&&k(j,"bg-terminal-bg","file"!==t[0]),128&n[0]&&k(j,"opacity-50",t[7]),128&n[0]&&(T.disabled=t[7]),1&n[0]&&k(T,"bg-gray-700","url"===t[0]),1&n[0]&&k(T,"bg-terminal-bg","url"!==t[0]),128&n[0]&&k(T,"opacity-50",t[7]),le===(le=se(t))&&ce?ce.p(t,n):(ce&&ce.d(1),ce=le&&le(t),ce&&(ce.c(),ce.m(a,null))),128&n[0]&&(J.disabled=t[7]),4&n[0]&&$(J,t[2]),128&n[0]&&k(J,"opacity-50",t[7]),128&n[0]&&(Q.disabled=t[7]),8&n[0]&&$(Q,t[3]),128&n[0]&&k(Q,"opacity-50",t[7]),de!==(de=ae(t))&&(ue.d(1),ue=de(t),ue&&(ue.c(),ue.m(ne,ie))),fe===(fe=me(t))&&pe?pe.p(t,n):(pe.d(1),pe=fe(t),pe&&(pe.c(),pe.m(ne,null))),128&n[0]&&k(ne,"bg-status-info",!t[7]),128&n[0]&&k(ne,"bg-status-error",t[7]),128&n[0]&&k(ne,"text-terminal-bg",!t[7]||t[7]),128&n[0]&&k(ne,"hover:bg-blue-600",!t[7]),128&n[0]&&k(ne,"hover:bg-red-600",t[7])},i:e,o:e,d(e){e&&m(n),ce&&ce.d(),ue.d(),pe.d(),re=!1,i(oe)}}}function Re(e,t,n){let i,r,o,s,d,u,m,f,p,b;c(e,ae,e=>n(7,i=e)),c(e,ue,e=>n(29,r=e)),c(e,pe,e=>n(30,o=e)),c(e,fe,e=>n(31,s=e)),c(e,be,e=>n(32,d=e)),c(e,ge,e=>n(33,u=e)),c(e,he,e=>n(34,m=e)),c(e,xe,e=>n(35,f=e)),c(e,de,e=>n(36,p=e)),c(e,me,e=>n(37,b=e));let g,h,x="file",_=null,y="",v=.25,w="disabled",$={icon:"mdi:file-plus",title:"Drop files here or click to browse",subtitle:"MP3, WAV, M4A, FLAC, etc. (up to 1GB)"},k=null,S=null;function C(e){n(6,$={icon:"mdi:file-music",title:e.name,subtitle:\`Ready to transcribe (\${_e(e.size)})\`,description:'Click "Live Transcribe" to start'}),_=e}function L(){n(6,$={icon:"mdi:file-plus",title:"Drop files here or click to browse",subtitle:"MP3, WAV, M4A, FLAC, etc. (up to 1GB)"}),_=null,h&&n(5,h.value="",h)}function T(){g&&(g.classList.remove("border-terminal-accent","bg-green-900/20"),g.classList.add("border-terminal-border"))}function M(){h&&h.click()}function E(e){n(0,x=e),"file"===e&&L()}async function D(e){const t=l(le),n=t.find(e=>"streaming"===e.processing_method&&e.filename===r&&"processing"===e.status);switch(e.type){case"status":a(pe,o+=\`📡 \${e.message}\\n\`,o),n&&e.job_id&&n.job_id.startsWith("stream_")&&(n.job_id=e.job_id,n.file_size=e.total_size,n.estimated_chunks=e.estimated_chunks,le.set(t)),e.total_size&&a(he,m=_e(e.total_size),m);break;case"chunk_info":a(ge,u=e.total_chunks,u),a(pe,o+=\`🧩 Ready to process \${e.total_chunks} chunks (\${e.chunk_size_mb}MB each)\\n\\n\`,o);break;case"chunk_start":a(fe,s=e.progress,s),a(pe,o+=\`🔄 Chunk \${e.chunk_index+1} (\${e.progress}%) - transcribing...\\n\`,o),n&&(n.progress=e.progress,le.set(t));break;case"delta":if(e.llm_applied)a(pe,o+=\`📝 Raw: "\${e.raw_text}"\\n\`,o),a(pe,o+=\`🧠 LLM: "\${e.corrected_text}"\\n\\n\`,o);else if(e.llm_error)a(pe,o+=\`📝 "\${e.raw_text}"\\n\`,o),a(pe,o+=\`⚠️  LLM failed: \${e.llm_error}\\n\\n\`,o);else{const t=e.text||e.raw_text;a(pe,o+=\`📝 "\${t}"\\n\\n\`,o)}a(be,d+=1,d);break;case"chunk_done":a(fe,s=e.progress,s),a(pe,o+=\`✅ Chunk \${e.chunk_index+1} completed (\${e.progress}%)\\n\\n\`,o);break;case"chunk_error":a(pe,o+=\`❌ Chunk \${e.chunk_index+1} error: \${e.error}\\n\\n\`,o);break;case"llm_processing":const i="post_process"===e.mode?"post-processing":"per-chunk";a(pe,o+=\`🧠 \${e.message||\`Applying LLM corrections (\${i})...\`}\\n\`,o);break;case"llm_done":const l="post_process"===e.mode?"Post-processing":"Per-chunk";a(pe,o+=\`✅ \${l} LLM correction completed\\n\`,o),"post_process"===e.mode&&a(pe,o+=\`📝 Improved transcript:\\n"\${e.corrected_text}"\\n\\n\`,o);break;case"llm_error":const c="post_process"===e.mode?"Post-processing":"Per-chunk";a(pe,o+=\`❌ \${c} LLM correction failed: \${e.error}\\n\`,o),e.fallback_text&&a(pe,o+=\`📝 Using original transcript: "\${e.fallback_text}"\\n\\n\`,o);break;case"done":a(pe,o+="\\n🎉 Transcription complete!\\n",o),a(pe,o+=\`📊 Final transcript: "\${e.final_transcript}"\\n\`,o);const f=t.find(e=>"streaming"===e.processing_method&&e.filename===r&&"processing"===e.status);if(f){f.status="done",f.final_transcript=e.final_transcript,f.raw_transcript=e.raw_transcript,f.corrected_transcript=e.corrected_transcript,f.total_segments=e.total_segments,f.completed_at=(new Date).toISOString(),f.progress=100,le.set(t);try{await async function(e){try{if(!(await fetch("/save-streaming-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e.job_id,filename:e.filename,file_size:e.file_size,final_transcript:e.final_transcript,raw_transcript:e.raw_transcript,corrected_transcript:e.corrected_transcript,total_segments:e.total_segments,created_at:e.created_at,completed_at:e.completed_at,use_llm:e.use_llm,llm_mode:e.llm_mode,chunk_size_mb:e.chunk_size_mb,source_url:e.source_url||null})})).ok)throw new Error("Failed to save streaming job");oe.info("api","Saved streaming job to server",{job_id:e.job_id})}catch(e){oe.error("Failed to save streaming job to server",e)}}(f),se.info("Saved streaming job to server",{job_id:f.job_id}),await we(),se.info("Refreshed jobs list after streaming completion")}catch(e){se.error("Failed to save streaming job to server",e)}se.complete("Streaming job completed",{job_id:f.job_id,filename:r,transcript_length:e.final_transcript?.length||0})}break;case"error":a(pe,o+=\`\\n❌ Error: \${e.error}\\n\`,o);const p=t.find(e=>"streaming"===e.processing_method&&e.filename===r&&"processing"===e.status);p&&(p.status="failed",p.error=e.error,p.failed_at=(new Date).toISOString(),le.set(t))}}function F(){k&&(k.abort(),k=null),a(ae,i=!1,i),S&&(clearInterval(S),S=null),setTimeout(()=>{"file"===x?L():n(1,y="")},2e3)}return[x,y,v,w,g,h,$,i,function(e){e.preventDefault(),g&&(g.classList.add("border-terminal-accent","bg-green-900/20"),g.classList.remove("border-terminal-border"))},T,function(e){e.preventDefault(),T();const t=Array.from(e.dataTransfer.files);t.length>0&&C(t[0])},function(e){const t=Array.from(e.target.files);t.length>0&&C(t[0])},M,E,function(){return i?\`🔄 Streaming \${r}...\`:"file"===x?_?\`Live Transcribe \${_.name}\`:"Select File to Transcribe":"Live Transcribe URL"},function(){a(de,p=!1,p),setTimeout(()=>{!async function(){if(i)return;let e,t;if("file"===x){if(!_)return void M();t=_.name;const n=new FormData;n.append("file",_),n.append("chunk_size_mb",v.toString()),"disabled"!==w?(n.append("use_llm","true"),n.append("llm_mode",w)):n.append("use_llm","false"),e={method:"POST",body:n}}else if("url"===x){if(!y.trim())return void alert("Please enter an audio URL first");t=y.split("/").pop()||"audio file";const n={url:y.trim(),chunk_size_mb:v};"disabled"!==w?(n.use_llm=!0,n.llm_mode=w):n.use_llm=!1,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}}await async function(e,t,n){if(i)return;a(ae,i=!0,i),a(de,p=!0,p),a(ue,r=n,r),a(pe,o="",o),a(fe,s=0,s),a(be,d=0,d),a(ge,u=0,u),a(he,m="",m),a(xe,f=w,f),a(me,b=Date.now(),b),S=setInterval(()=>{},1e3);const c={job_id:"stream_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),filename:n,status:"processing",file_size:0,processing_method:"streaming",upload_method:"streaming",created_at:(new Date).toISOString(),use_llm:"disabled"!==w,llm_mode:w,chunk_size_mb:v,progress:0},g=l(le);le.set([c,...g]),k=new AbortController,t.signal=k.signal,a(pe,o="🚀 Starting transcription...\\n\\n",o);try{const n=await fetch(e,t);if(!n.ok)throw new Error("Streaming failed: "+n.status);const r=n.body.getReader(),o=new TextDecoder;let s="";for(;;){const{done:e,value:t}=await r.read();if(e){se.complete("Stream reader reached end");break}if(!i){se.info("warning","Stream stopped by user");break}s+=o.decode(t,{stream:!0});const n=s.split("\\n");s=n.pop()||"";for(const e of n)if(e.startsWith("data: "))try{const t=JSON.parse(e.slice(6));await D(t)}catch(t){console.error("Failed to parse SSE data:",t,e)}}}catch(e){"AbortError"===e.name?(se.info("stream","Stream aborted by user"),a(pe,o+="\\n❌ Streaming stopped by user\\n",o)):(se.error("Streaming failed",e),a(pe,o+=\`\\n❌ Streaming failed: \${e.message}\\n\`,o))}finally{F()}}("/stream",e,t)}()},100)},F,()=>E("file"),()=>E("url"),function(e){A[e?"unshift":"push"](()=>{g=e,n(4,g)})},e=>"Enter"===e.key&&M(),function(e){A[e?"unshift":"push"](()=>{h=e,n(5,h)})},function(){y=this.value,n(1,y)},function(){v=j(this),n(2,v)},function(){w=j(this),n(3,w)}]}class Ie extends te{constructor(e){super(),ee(this,e,Re,Ne,o,{},null,[-1,-1])}}function Be(e){let t,n,i,r,o,s,l,c,a,g,h,v,$,j,k,S,C,L,T,M,E,A,D,F,O,P,z,N,R,I,B,J,U,W,G,H,q,V,K,X,Q,Y,Z=(e[7]||"?")+"",ee=(e[8]||"-")+"";function te(e,t){return e[1]?Ue:Je}let ne=te(e),ie=ne(e);function re(e,t){return e[1]?Ge:We}let oe=re(e),se=oe(e);function le(e,t){return e[1]?qe:He}let ce=le(e),ae=ce(e);function de(e,t){return e[0]?Ke:Ve}let ue=de(e),me=ue(e);return{c(){t=f("div"),n=f("div"),i=f("iconify-icon"),r=b(),ie.c(),o=b(),s=f("div"),l=f("div"),se.c(),c=b(),a=f("span"),g=p(e[4]),h=b(),v=f("div"),$=f("div"),j=p(e[5]),k=p("%"),S=b(),C=f("div"),L=f("span"),T=p("Chunks: "),M=p(e[6]),E=p("/"),A=p(Z),D=b(),F=f("span"),O=p("Size: "),P=p(ee),z=b(),N=f("span"),R=p("Elapsed: "),I=p(e[2]),B=p("s"),J=b(),U=f("span"),W=p("Mode: "),G=p(e[9]),H=b(),q=f("div"),V=f("div"),K=f("iconify-icon"),X=b(),ae.c(),Q=b(),Y=f("div"),me.c(),_(i,"icon","mdi:waveform"),_(i,"class","text-lg"),x(n,"class","font-bold text-center mb-4 border-b border-terminal-border pb-2 flex items-center justify-center gap-2"),x(a,"class","text-terminal-text-dim"),x(l,"class","flex items-center gap-2 mb-2"),x($,"class","bg-status-info h-full flex items-center justify-center text-terminal-bg text-xs font-bold transition-all duration-300"),w($,"width",e[5]+"%"),x(v,"class","bg-terminal-bg border border-terminal-border h-5 overflow-hidden"),x(C,"class","text-xs text-terminal-text-dim mt-2 grid grid-cols-2 md:grid-cols-4 gap-2"),x(s,"class","mb-4"),_(K,"icon","mdi:text-box"),_(K,"class","text-lg"),x(V,"class","p-3 border-b border-terminal-border font-bold text-terminal-accent flex items-center gap-2"),x(Y,"id","streaming-transcript"),x(Y,"class","p-4 max-h-80 overflow-y-auto font-mono text-sm leading-relaxed"),x(q,"class","border border-terminal-border bg-terminal-bg"),x(t,"class","border border-terminal-border bg-terminal-bg-light p-4 mb-4")},m(e,m){u(e,t,m),d(t,n),d(n,i),d(n,r),ie.m(n,null),d(t,o),d(t,s),d(s,l),se.m(l,null),d(l,c),d(l,a),d(a,g),d(s,h),d(s,v),d(v,$),d($,j),d($,k),d(s,S),d(s,C),d(C,L),d(L,T),d(L,M),d(L,E),d(L,A),d(C,D),d(C,F),d(F,O),d(F,P),d(C,z),d(C,N),d(N,R),d(N,I),d(N,B),d(C,J),d(C,U),d(U,W),d(U,G),d(t,H),d(t,q),d(q,V),d(V,K),d(V,X),ae.m(V,null),d(q,Q),d(q,Y),me.m(Y,null)},p(e,t){ne!==(ne=te(e))&&(ie.d(1),ie=ne(e),ie&&(ie.c(),ie.m(n,null))),oe!==(oe=re(e))&&(se.d(1),se=oe(e),se&&(se.c(),se.m(l,c))),16&t&&y(g,e[4]),32&t&&y(j,e[5]),32&t&&w($,"width",e[5]+"%"),64&t&&y(M,e[6]),128&t&&Z!==(Z=(e[7]||"?")+"")&&y(A,Z),256&t&&ee!==(ee=(e[8]||"-")+"")&&y(P,ee),4&t&&y(I,e[2]),512&t&&y(G,e[9]),ce!==(ce=le(e))&&(ae.d(1),ae=ce(e),ae&&(ae.c(),ae.m(V,null))),ue===(ue=de(e))&&me?me.p(e,t):(me.d(1),me=ue(e),me&&(me.c(),me.m(Y,null)))},d(e){e&&m(t),ie.d(),se.d(),ae.d(),me.d()}}}function Je(e){let t;return{c(){t=p("Streaming Results")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Ue(e){let t;return{c(){t=p("Live Streaming Transcription")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function We(e){let t,n,i;return{c(){t=f("span"),n=b(),i=f("span"),i.textContent="Streaming completed",x(t,"class","w-2 h-2 bg-status-success rounded-full"),x(i,"class","font-bold text-status-success")},m(e,r){u(e,t,r),u(e,n,r),u(e,i,r)},d(e){e&&(m(t),m(n),m(i))}}}function Ge(e){let t,n,i;return{c(){t=f("span"),n=b(),i=f("span"),i.textContent="Streaming in progress...",x(t,"class","w-2 h-2 bg-status-info rounded-full animate-pulse"),x(i,"class","font-bold text-status-info")},m(e,r){u(e,t,r),u(e,n,r),u(e,i,r)},d(e){e&&(m(t),m(n),m(i))}}}function He(e){let t;return{c(){t=p("Final Transcript:")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function qe(e){let t;return{c(){t=p("Live Transcript:")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function Ve(t){let n;return{c(){n=f("div"),n.textContent="Waiting for transcription results...",x(n,"class","text-terminal-text-dim italic")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function Ke(e){let t,n;return{c(){t=f("pre"),n=p(e[0]),x(t,"class","whitespace-pre-wrap")},m(e,i){u(e,t,i),d(t,n)},p(e,t){1&t&&y(n,e[0])},d(e){e&&m(t)}}}function Xe(t){let n,i=(t[1]||t[3])&&Be(t);return{c(){i&&i.c(),n=g()},m(e,t){i&&i.m(e,t),u(e,n,t)},p(e,[t]){e[1]||e[3]?i?i.p(e,t):(i=Be(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){e&&m(n),i&&i.d(e)}}}function Qe(e,t,n){let i,r,o,s,l,a,d,u,m,f;c(e,pe,e=>n(0,i=e)),c(e,ae,e=>n(1,r=e)),c(e,me,e=>n(11,o=e)),c(e,de,e=>n(3,s=e)),c(e,ue,e=>n(4,l=e)),c(e,fe,e=>n(5,a=e)),c(e,be,e=>n(6,d=e)),c(e,ge,e=>n(7,u=e)),c(e,he,e=>n(8,m=e)),c(e,xe,e=>n(9,f=e));let p=0,b=null;return e.$$.update=()=>{3074&e.$$.dirty&&(r&&!b?n(10,b=setInterval(()=>{n(2,p=Math.floor((Date.now()-o)/1e3))},1e3)):!r&&b&&(clearInterval(b),n(10,b=null))),1&e.$$.dirty&&i&&setTimeout(()=>{const e=document.getElementById("streaming-transcript");e&&(e.scrollTop=e.scrollHeight)},50)},[i,r,p,s,l,a,d,u,m,f,b,o]}class Ye extends te{constructor(e){super(),ee(this,e,Qe,Xe,o,{})}}function Ze(t){let n,i,r,o,s,l,c,a,p,g;return s=new Me({}),c=new Ie({}),p=new Ye({}),{c(){n=f("div"),i=f("div"),i.textContent="Main Menu",r=b(),o=f("div"),X(s.$$.fragment),l=b(),X(c.$$.fragment),a=b(),X(p.$$.fragment),x(i,"class","font-bold text-center mb-4 border-b border-terminal-border pb-2"),x(o,"class","grid grid-cols-1 lg:grid-cols-2 gap-4"),x(n,"class","border border-terminal-border bg-terminal-bg-light p-4 mb-4")},m(e,t){u(e,n,t),d(n,i),d(n,r),d(n,o),Q(s,o,null),d(o,l),Q(c,o,null),u(e,a,t),Q(p,e,t),g=!0},p:e,i(e){g||(H(s.$$.fragment,e),H(c.$$.fragment,e),H(p.$$.fragment,e),g=!0)},o(e){q(s.$$.fragment,e),q(c.$$.fragment,e),q(p.$$.fragment,e),g=!1},d(e){e&&(m(n),m(a)),Y(s),Y(c),Y(p,e)}}}function et(e){return M(),[]}class tt extends te{constructor(e){super(),ee(this,e,et,Ze,o,{})}}function nt(e){let t;return{c(){t=f("span"),t.textContent="URL",x(t,"class","text-status-info text-xs bg-blue-900/30 px-1 rounded")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function it(e){let t;return{c(){t=f("span"),t.textContent="🌊 Streamed",x(t,"class","text-status-info text-xs bg-blue-900/30 px-1 rounded")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function rt(e){let t,n,i,r,o,s=e[0].total_segments+"";return{c(){t=f("span"),n=f("iconify-icon"),i=b(),r=p(s),o=p(" segments"),_(n,"icon","mdi:format-list-numbered"),_(n,"class","text-xs")},m(e,s){u(e,t,s),d(t,n),d(t,i),d(t,r),d(t,o)},p(e,t){1&t&&s!==(s=e[0].total_segments+"")&&y(r,s)},d(e){e&&m(t)}}}function ot(e){let t,n,i,r,o=(e[0].progress||0)+"";return{c(){t=f("div"),n=f("div"),i=p(o),r=p("%"),x(n,"class","bg-terminal-accent h-full flex items-center justify-center text-terminal-bg text-xs font-bold transition-all duration-300"),w(n,"width",(e[0].progress||0)+"%"),x(t,"class","bg-terminal-bg border border-terminal-border h-5 overflow-hidden mt-2")},m(e,o){u(e,t,o),d(t,n),d(n,i),d(n,r)},p(e,t){1&t&&o!==(o=(e[0].progress||0)+"")&&y(i,o),1&t&&w(n,"width",(e[0].progress||0)+"%")},d(e){e&&m(t)}}}function st(e){let t;return{c(){t=f("span"),t.innerHTML='<iconify-icon icon="mdi:brain" class="text-xs"></iconify-icon> LLM Enhanced',x(t,"class","text-terminal-accent")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function lt(e){let t,n,i,r,o=e[0].error+"";return{c(){t=f("span"),n=f("iconify-icon"),i=p(" \\n          Error: "),r=p(o),_(n,"icon","mdi:alert-circle"),_(n,"class","text-xs"),x(t,"class","text-status-error")},m(e,o){u(e,t,o),d(t,n),d(t,i),d(t,r)},p(e,t){1&t&&o!==(o=e[0].error+"")&&y(r,o)},d(e){e&&m(t)}}}function ct(e){let t;function n(e,t){return"done"===e[0].status?dt:at}let i=n(e),r=i(e);return{c(){t=f("div"),r.c(),x(t,"class","border-t border-terminal-border bg-gray-900/30 p-3")},m(e,n){u(e,t,n),r.m(t,null)},p(e,o){i===(i=n(e))&&r?r.p(e,o):(r.d(1),r=i(e),r&&(r.c(),r.m(t,null)))},d(e){e&&m(t),r.d()}}}function at(e){let t,n,i,r,o,s,l,c,a,g,h,_,v,w,$,j,k,S,C,L,T,M,E,A,D,F,O,P,z,N,R,I,B,J=e[0].job_id+"",U=e[0].status+"",W=(e[0].upload_method||"direct")+"",G=(e[0].processing_method||"direct")+"",H=(e[0].use_llm?e[0].llm_mode||"enabled":"disabled")+"",q=_e(e[0].file_size||0)+"",V=e[0].chunk_size_mb&&ut(e);return{c(){t=f("div"),n=f("div"),i=f("div"),i.textContent="Job Details",r=b(),o=f("div"),s=f("div"),l=p("ID: "),c=p(J),a=b(),g=f("div"),h=p("Status: "),_=p(U),v=b(),w=f("div"),$=p("Upload: "),j=p(W),k=b(),S=f("div"),C=p("Processing: "),L=p(G),T=b(),M=f("div"),E=f("div"),E.textContent="Settings",A=b(),D=f("div"),F=f("div"),O=p("LLM: "),P=p(H),z=b(),V&&V.c(),N=b(),R=f("div"),I=p("File Size: "),B=p(q),x(i,"class","text-terminal-accent font-bold mb-2"),x(o,"class","space-y-1 text-xs text-terminal-text-dim"),x(E,"class","text-terminal-accent font-bold mb-2"),x(D,"class","space-y-1 text-xs text-terminal-text-dim"),x(t,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(e,m){u(e,t,m),d(t,n),d(n,i),d(n,r),d(n,o),d(o,s),d(s,l),d(s,c),d(o,a),d(o,g),d(g,h),d(g,_),d(o,v),d(o,w),d(w,$),d(w,j),d(o,k),d(o,S),d(S,C),d(S,L),d(t,T),d(t,M),d(M,E),d(M,A),d(M,D),d(D,F),d(F,O),d(F,P),d(D,z),V&&V.m(D,null),d(D,N),d(D,R),d(R,I),d(R,B)},p(e,t){1&t&&J!==(J=e[0].job_id+"")&&y(c,J),1&t&&U!==(U=e[0].status+"")&&y(_,U),1&t&&W!==(W=(e[0].upload_method||"direct")+"")&&y(j,W),1&t&&G!==(G=(e[0].processing_method||"direct")+"")&&y(L,G),1&t&&H!==(H=(e[0].use_llm?e[0].llm_mode||"enabled":"disabled")+"")&&y(P,H),e[0].chunk_size_mb?V?V.p(e,t):(V=ut(e),V.c(),V.m(D,N)):V&&(V.d(1),V=null),1&t&&q!==(q=_e(e[0].file_size||0)+"")&&y(B,q)},d(e){e&&m(t),V&&V.d()}}}function dt(e){let t,n,r,o,s,l,c,a,g,v,w,$,j,k,S,C,L,T,M,E,A,D,F,O,P,z,N,R,I,B,J,U,W,G,H,q,V,K,X,Q=e[0].job_id+"",Y=e[0].status+"",Z=(e[0].processing_method||"direct")+"",ee=e[2]?"Copied!":"Copy Transcript",te=e[0].total_segments>0&&mt(e);function ne(e,t){return"streaming"===e[0].processing_method?pt:ft}let ie=ne(e),re=ie(e);function oe(e,t){return"streaming"===e[0].processing_method?gt:bt}let se=oe(e),le=se(e);return{c(){t=f("div"),n=f("div"),r=f("div"),r.textContent="Job Details",o=b(),s=f("div"),l=f("div"),c=p("ID: "),a=p(Q),g=b(),v=f("div"),w=p("Status: "),$=p(Y),j=b(),k=f("div"),S=p("Method: "),C=p(Z),L=b(),te&&te.c(),T=b(),M=f("div"),M.textContent="Actions",E=b(),A=f("div"),D=f("button"),F=f("iconify-icon"),O=b(),P=p(ee),z=b(),N=f("button"),N.innerHTML='<iconify-icon icon="mdi:code-json" class="text-xs"></iconify-icon> Copy JSON',R=b(),I=f("div"),B=f("div"),B.textContent="Full Transcript",J=b(),U=f("div"),W=f("div"),G=f("iconify-icon"),H=b(),re.c(),q=b(),V=f("div"),le.c(),x(r,"class","text-terminal-accent font-bold mb-2"),x(s,"class","space-y-1 text-xs text-terminal-text-dim mb-4"),x(M,"class","text-terminal-accent font-bold mb-2"),_(F,"icon","mdi:content-copy"),_(F,"class","text-xs"),D.disabled=e[2],x(D,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-2 py-1 text-xs hover:bg-gray-700 transition-colors flex items-center gap-1 w-full"),x(N,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-2 py-1 text-xs hover:bg-gray-700 transition-colors flex items-center gap-1 w-full"),x(A,"class","space-y-2"),x(n,"class","lg:col-span-1"),x(B,"class","text-terminal-accent font-bold mb-2"),_(G,"icon","mdi:text-box"),_(G,"class","text-sm"),x(W,"class","p-3 border-b border-terminal-border font-bold text-terminal-text-dim text-xs"),x(V,"class","p-4 max-h-64 overflow-y-auto font-mono text-sm leading-relaxed"),x(U,"class","border border-terminal-border bg-terminal-bg"),x(I,"class","lg:col-span-2"),x(t,"class","grid grid-cols-1 lg:grid-cols-3 gap-4")},m(i,m){u(i,t,m),d(t,n),d(n,r),d(n,o),d(n,s),d(s,l),d(l,c),d(l,a),d(s,g),d(s,v),d(v,w),d(v,$),d(s,j),d(s,k),d(k,S),d(k,C),d(s,L),te&&te.m(s,null),d(n,T),d(n,M),d(n,E),d(n,A),d(A,D),d(D,F),d(D,O),d(D,P),d(A,z),d(A,N),d(t,R),d(t,I),d(I,B),d(I,J),d(I,U),d(U,W),d(W,G),d(W,H),re.m(W,null),d(U,q),d(U,V),le.m(V,null),K||(X=[h(D,"click",e[9]),h(N,"click",e[10])],K=!0)},p(e,t){1&t&&Q!==(Q=e[0].job_id+"")&&y(a,Q),1&t&&Y!==(Y=e[0].status+"")&&y($,Y),1&t&&Z!==(Z=(e[0].processing_method||"direct")+"")&&y(C,Z),e[0].total_segments>0?te?te.p(e,t):(te=mt(e),te.c(),te.m(s,null)):te&&(te.d(1),te=null),4&t&&ee!==(ee=e[2]?"Copied!":"Copy Transcript")&&y(P,ee),4&t&&(D.disabled=e[2]),ie!==(ie=ne(e))&&(re.d(1),re=ie(e),re&&(re.c(),re.m(W,null))),se===(se=oe(e))&&le?le.p(e,t):(le.d(1),le=se(e),le&&(le.c(),le.m(V,null)))},d(e){e&&m(t),te&&te.d(),re.d(),le.d(),K=!1,i(X)}}}function ut(e){let t,n,i,r,o=e[0].chunk_size_mb+"";return{c(){t=f("div"),n=p("Chunk Size: "),i=p(o),r=p("MB")},m(e,o){u(e,t,o),d(t,n),d(t,i),d(t,r)},p(e,t){1&t&&o!==(o=e[0].chunk_size_mb+"")&&y(i,o)},d(e){e&&m(t)}}}function mt(e){let t,n,i,r=e[0].total_segments+"";return{c(){t=f("div"),n=p("Segments: "),i=p(r)},m(e,r){u(e,t,r),d(t,n),d(t,i)},p(e,t){1&t&&r!==(r=e[0].total_segments+"")&&y(i,r)},d(e){e&&m(t)}}}function ft(e){let t;return{c(){t=p("Final Transcript")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function pt(e){let t;return{c(){t=p("Final Transcript (Streaming)")},m(e,n){u(e,t,n)},d(e){e&&m(t)}}}function bt(e){let t;function n(e,t){return e[4]?yt:e[5]&&e[3]?_t:e[5]?xt:ht}let i=n(e),r=i(e);return{c(){r.c(),t=g()},m(e,n){r.m(e,n),u(e,t,n)},p(e,o){i===(i=n(e))&&r?r.p(e,o):(r.d(1),r=i(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&m(t),r.d(e)}}}function gt(e){let t;function n(e,t){return e[0].final_transcript?jt:e[0].corrected_transcript?$t:e[0].raw_transcript?wt:vt}let i=n(e),r=i(e);return{c(){r.c(),t=g()},m(e,n){r.m(e,n),u(e,t,n)},p(e,o){i===(i=n(e))&&r?r.p(e,o):(r.d(1),r=i(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){e&&m(t),r.d(e)}}}function ht(t){let n;return{c(){n=f("div"),n.textContent="Transcript will load when expanded",x(n,"class","text-terminal-text-dim italic")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function xt(t){let n;return{c(){n=f("div"),n.textContent="No transcript available",x(n,"class","text-terminal-text-dim italic")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function _t(e){let t,n;return{c(){t=f("pre"),n=p(e[3]),x(t,"class","whitespace-pre-wrap text-terminal-text")},m(e,i){u(e,t,i),d(t,n)},p(e,t){8&t&&y(n,e[3])},d(e){e&&m(t)}}}function yt(t){let n;return{c(){n=f("div"),n.innerHTML='<iconify-icon icon="mdi:loading" class="animate-spin"></iconify-icon>\\n                       Loading transcript...',x(n,"class","text-terminal-text-dim italic flex items-center gap-2")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function vt(t){let n;return{c(){n=f("div"),n.textContent="No transcript available",x(n,"class","text-terminal-text-dim italic")},m(e,t){u(e,n,t)},p:e,d(e){e&&m(n)}}}function wt(e){let t,n,i=e[0].raw_transcript+"";return{c(){t=f("pre"),n=p(i),x(t,"class","whitespace-pre-wrap text-terminal-text")},m(e,i){u(e,t,i),d(t,n)},p(e,t){1&t&&i!==(i=e[0].raw_transcript+"")&&y(n,i)},d(e){e&&m(t)}}}function $t(e){let t,n,i=e[0].corrected_transcript+"";return{c(){t=f("pre"),n=p(i),x(t,"class","whitespace-pre-wrap text-terminal-text")},m(e,i){u(e,t,i),d(t,n)},p(e,t){1&t&&i!==(i=e[0].corrected_transcript+"")&&y(n,i)},d(e){e&&m(t)}}}function jt(e){let t,n,i=e[0].final_transcript+"";return{c(){t=f("pre"),n=p(i),x(t,"class","whitespace-pre-wrap text-terminal-text")},m(e,i){u(e,t,i),d(t,n)},p(e,t){1&t&&i!==(i=e[0].final_transcript+"")&&y(n,i)},d(e){e&&m(t)}}}function kt(t){let n,r,o,s,l,c,a,g,v,w,$,j,S,C,L,T,M,E,A,D,F,O,P,z,N,R,I,B,J,U,W,G,H,q,V,K,X,Q,Y,Z,ee,te,ne,ie,re,oe,se,le,ce,ae,de,ue=(t[0].filename||"Unknown")+"",me=t[0].job_id.slice(0,8)+"",fe=_e(t[0].file_size||0)+"",pe=(t[0].processing_method||"direct")+"",be=St(t[0])+"",ge=new Date(t[0].created_at).toLocaleString()+"",he="url"===t[0].upload_method&&nt(),xe="streaming"===t[0].upload_method&&it(),ye=t[0].total_segments>0&&rt(t),ve=void 0!==t[0].progress&&("processing"===t[0].status||"uploaded"===t[0].status)&&ot(t),we=t[0].use_llm&&st(),$e=t[0].error&&lt(t),je=t[1]&&ct(t);return{c(){n=f("div"),r=f("div"),o=f("div"),s=f("div"),l=f("div"),c=f("iconify-icon"),a=b(),g=f("span"),v=p(ue),w=b(),he&&he.c(),$=b(),xe&&xe.c(),j=b(),S=f("div"),C=f("span"),L=f("iconify-icon"),T=b(),M=p(me),E=p("..."),A=b(),D=f("span"),F=f("iconify-icon"),O=b(),P=p(fe),z=b(),N=f("span"),R=f("iconify-icon"),I=b(),B=p(pe),J=b(),ye&&ye.c(),U=b(),W=f("div"),G=f("div"),H=f("iconify-icon"),V=b(),K=p(be),Q=b(),Y=f("button"),Y.innerHTML='<iconify-icon icon="mdi:delete" class="text-lg"></iconify-icon>',Z=b(),ve&&ve.c(),ee=b(),te=f("div"),ne=f("span"),ie=f("iconify-icon"),re=b(),oe=p(ge),se=b(),we&&we.c(),le=b(),$e&&$e.c(),ce=b(),je&&je.c(),_(c,"icon","mdi:file-music"),_(c,"class","text-terminal-accent"),x(g,"class","font-bold"),x(l,"class","flex items-center gap-2 mb-1"),_(L,"icon","mdi:identifier"),_(L,"class","text-xs"),_(F,"icon","mdi:file-outline"),_(F,"class","text-xs"),_(R,"icon","mdi:cog"),_(R,"class","text-xs"),x(S,"class","flex flex-wrap gap-3 text-xs text-terminal-text-dim"),x(s,"class","flex-1 min-w-0"),_(H,"icon",q=t[7](t[0].status)),_(H,"class","text-xs"),k(H,"animate-spin","processing"===t[0].status||"uploaded"===t[0].status),x(G,"class",X="px-2 py-1 text-xs font-bold uppercase "+t[6](t[0].status)+" flex items-center gap-1"),x(Y,"class","text-status-error hover:bg-status-error hover:text-terminal-bg transition-colors p-1 rounded flex items-center justify-center"),x(Y,"title","Delete job"),x(W,"class","flex items-center gap-2 flex-shrink-0"),x(o,"class","flex items-start gap-3"),_(ie,"icon","mdi:clock-outline"),_(ie,"class","text-xs"),x(te,"class","mt-2 flex flex-wrap gap-3 text-xs text-terminal-text-dim"),x(r,"class","p-3 pr-4 hover:bg-gray-800/50 transition-colors cursor-pointer"),x(r,"role","button"),x(r,"tabindex","0"),x(n,"class","border-b border-terminal-border")},m(e,i){var m;u(e,n,i),d(n,r),d(r,o),d(o,s),d(s,l),d(l,c),d(l,a),d(l,g),d(g,v),d(l,w),he&&he.m(l,null),d(l,$),xe&&xe.m(l,null),d(s,j),d(s,S),d(S,C),d(C,L),d(C,T),d(C,M),d(C,E),d(S,A),d(S,D),d(D,F),d(D,O),d(D,P),d(S,z),d(S,N),d(N,R),d(N,I),d(N,B),d(S,J),ye&&ye.m(S,null),d(o,U),d(o,W),d(W,G),d(G,H),d(G,V),d(G,K),d(W,Q),d(W,Y),d(r,Z),ve&&ve.m(r,null),d(r,ee),d(r,te),d(te,ne),d(ne,ie),d(ne,re),d(ne,oe),d(te,se),we&&we.m(te,null),d(te,le),$e&&$e.m(te,null),d(n,ce),je&&je.m(n,null),ae||(de=[h(Y,"click",(m=t[8],function(e){return e.stopPropagation(),m.call(this,e)})),h(r,"click",t[11]),h(r,"keydown",t[12])],ae=!0)},p(e,[t]){1&t&&ue!==(ue=(e[0].filename||"Unknown")+"")&&y(v,ue),"url"===e[0].upload_method?he||(he=nt(),he.c(),he.m(l,$)):he&&(he.d(1),he=null),"streaming"===e[0].upload_method?xe||(xe=it(),xe.c(),xe.m(l,null)):xe&&(xe.d(1),xe=null),1&t&&me!==(me=e[0].job_id.slice(0,8)+"")&&y(M,me),1&t&&fe!==(fe=_e(e[0].file_size||0)+"")&&y(P,fe),1&t&&pe!==(pe=(e[0].processing_method||"direct")+"")&&y(B,pe),e[0].total_segments>0?ye?ye.p(e,t):(ye=rt(e),ye.c(),ye.m(S,null)):ye&&(ye.d(1),ye=null),1&t&&q!==(q=e[7](e[0].status))&&_(H,"icon",q),1&t&&k(H,"animate-spin","processing"===e[0].status||"uploaded"===e[0].status),1&t&&be!==(be=St(e[0])+"")&&y(K,be),1&t&&X!==(X="px-2 py-1 text-xs font-bold uppercase "+e[6](e[0].status)+" flex items-center gap-1")&&x(G,"class",X),void 0===e[0].progress||"processing"!==e[0].status&&"uploaded"!==e[0].status?ve&&(ve.d(1),ve=null):ve?ve.p(e,t):(ve=ot(e),ve.c(),ve.m(r,ee)),1&t&&ge!==(ge=new Date(e[0].created_at).toLocaleString()+"")&&y(oe,ge),e[0].use_llm?we||(we=st(),we.c(),we.m(te,le)):we&&(we.d(1),we=null),e[0].error?$e?$e.p(e,t):($e=lt(e),$e.c(),$e.m(te,null)):$e&&($e.d(1),$e=null),e[1]?je?je.p(e,t):(je=ct(e),je.c(),je.m(n,null)):je&&(je.d(1),je=null)},i:e,o:e,d(e){e&&m(n),he&&he.d(),xe&&xe.d(),ye&&ye.d(),ve&&ve.d(),we&&we.d(),$e&&$e.d(),je&&je.d(),ae=!1,i(de)}}}function St(e){return"processing"===e.status||"uploaded"===e.status?"streaming"===e.processing_method?"STREAMING":"PROCESSING":"done"===e.status?"COMPLETED":e.status.toUpperCase()}function Ct(e,t,n){let{job:i}=t,r=!1,o=!1,s="",c=!1,a=!1;const d={processing:"bg-status-info text-terminal-bg",uploaded:"bg-status-info text-terminal-bg",failed:"bg-status-error text-terminal-bg",done:"bg-status-success text-terminal-bg"},u={processing:"mdi:sync",uploaded:"mdi:sync",failed:"mdi:alert-circle",done:"mdi:check-circle"};function m(){n(1,r=!r),r&&"done"===i.status&&"streaming"!==i.processing_method&&async function(){if(!c&&!a&&"streaming"!==i.processing_method){n(4,c=!0);try{const e=await fetch(\`/result?job_id=\${i.job_id}\`);if(e.ok){const t=await e.json();n(3,s=t.final||"No transcript available"),n(5,a=!0)}else n(3,s="Failed to fetch transcript")}catch(e){n(3,s="Error loading transcript: "+e.message)}finally{n(4,c=!1)}}}()}return e.$$set=e=>{"job"in e&&n(0,i=e.job)},[i,r,o,s,c,a,function(e){return d[e]||"bg-status-warning text-terminal-bg"},function(e){return u[e]||"mdi:clock"},async function(){if(confirm("Are you sure you want to delete this job?"))try{await async function(e){const t=l(le),n=t.find(t=>t.job_id===e);if(!n)throw new Error("Job not found");const i=t.length;if("streaming"===n.processing_method){console.log("Deleting streaming job locally and from server");const n=t.filter(t=>t.job_id!==e);return le.set(n),fetch("/delete-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e})}).then(t=>{t.ok?oe.info("delete","Also deleted streaming job from server KV",{job_id:e}):oe.debug("Streaming job not found on server (local only)",{job_id:e})}).catch(t=>{oe.debug("Error deleting streaming job from server (likely local only)",{job_id:e,error:t.message})}),console.log("Jobs after streaming deletion:",n.length,"removed:",i-n.length),void oe.info("delete","Deleted streaming job locally",{job_id:e,count_before:i,count_after:n.length})}const r=await fetch("/delete-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e})});if(!r.ok){const e=await r.json();throw console.error("Server deletion failed:",e),new Error(e.error||"Delete failed")}{console.log("Server deletion successful, removing from local array");const n=t.filter(t=>t.job_id!==e);le.set(n),console.log("Jobs after server deletion:",n.length,"removed:",i-n.length),oe.info("delete","Deleted server job",{job_id:e,count_before:i,count_after:n.length})}}(i.job_id)}catch(e){alert("Failed to delete job: "+e.message)}},async function(){if(!o){n(2,o=!0);try{await async function(e){const t=l(le).find(t=>t.job_id===e);if(!t)throw new Error("Job not found");let n="";if("streaming"===t.processing_method)n=t.final_transcript||t.corrected_transcript||t.raw_transcript||"No transcript available";else{const t=await fetch("/result?job_id="+e);n=t.ok?(await t.json()).final||"No transcript available":"Failed to fetch transcript"}return await navigator.clipboard.writeText(n),n}(i.job_id),setTimeout(()=>n(2,o=!1),2e3)}catch(e){alert("Failed to copy transcript: "+e.message),n(2,o=!1)}}},async function(){try{await async function(e){const t=l(le).find(t=>t.job_id===e);if(!t)throw new Error("Job not found");let n={...t};if("streaming"!==t.processing_method)try{const t=await fetch("/result?job_id="+e);if(t.ok){const e=await t.json();n.transcript_data=e}}catch(e){oe.warn("Could not fetch full transcript data for JSON export",e)}const i=JSON.stringify(n,null,2);return await navigator.clipboard.writeText(i),i}(i.job_id)}catch(e){alert("Failed to copy job JSON: "+e.message)}},m,e=>"Enter"===e.key&&m()]}class Lt extends te{constructor(e){super(),ee(this,e,Ct,kt,o,{job:0})}}function Tt(e,t,n){const i=e.slice();return i[8]=t[n],i}function Mt(e){let t,n,i,r=e[1].filter(Ot).length+"";return{c(){t=f("span"),n=p(r),i=p(" Running"),x(t,"class","text-xs bg-status-info text-terminal-bg px-2 py-1 rounded")},m(e,r){u(e,t,r),d(t,n),d(t,i)},p(e,t){2&t&&r!==(r=e[1].filter(Ot).length+"")&&y(n,r)},d(e){e&&m(t)}}}function Et(e){let t,n,r=[],o=new Map,s=V(e[1]);const l=e=>e[8].job_id;for(let t=0;t<s.length;t+=1){let n=Tt(e,s,t),i=l(n);o.set(i,r[t]=Dt(i,n))}return{c(){t=f("div");for(let e=0;e<r.length;e+=1)r[e].c();x(t,"class","border border-terminal-border")},m(e,i){u(e,t,i);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);n=!0},p(e,n){2&n&&(s=V(e[1]),W(),r=function(e,t,n,r,o,s,l,c,a,d,u,m){let f=e.length,p=s.length,b=f;const g={};for(;b--;)g[e[b].key]=b;const h=[],x=new Map,_=new Map,y=[];for(b=p;b--;){const e=m(o,s,b),i=n(e);let r=l.get(i);r?y.push(()=>r.p(e,t)):(r=d(i,e),r.c()),x.set(i,h[b]=r),i in g&&_.set(i,Math.abs(b-g[i]))}const v=new Set,w=new Set;function $(e){H(e,1),e.m(c,u),l.set(e.key,e),u=e.first,p--}for(;f&&p;){const t=h[p-1],n=e[f-1],i=t.key,r=n.key;t===n?(u=t.first,f--,p--):x.has(r)?!l.has(i)||v.has(i)?$(t):w.has(r)?f--:_.get(i)>_.get(r)?(w.add(i),$(t)):(v.add(r),f--):(a(n,l),f--)}for(;f--;){const t=e[f];x.has(t.key)||a(t,l)}for(;p;)$(h[p-1]);return i(y),h}(r,n,l,0,e,s,o,t,K,Dt,null,Tt),G())},i(e){if(!n){for(let e=0;e<s.length;e+=1)H(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)q(r[e]);n=!1},d(e){e&&m(t);for(let e=0;e<r.length;e+=1)r[e].d()}}}function At(t){let n;return{c(){n=f("div"),n.textContent="No jobs yet",x(n,"class","py-10 px-5 text-center text-terminal-text-dim")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}function Dt(e,t){let n,i,r;return i=new Lt({props:{job:t[8]}}),{key:e,first:null,c(){n=g(),X(i.$$.fragment),this.first=n},m(e,t){u(e,n,t),Q(i,e,t),r=!0},p(e,n){t=e;const r={};2&n&&(r.job=t[8]),i.$set(r)},i(e){r||(H(i.$$.fragment,e),r=!0)},o(e){q(i.$$.fragment,e),r=!1},d(e){e&&m(n),Y(i,e)}}}function Ft(e){let t,n,r,o,s,l,c,a,g,v,w,$,j,S,C,L,T,M,E,A,D,F,O,P,z,N,R,I,B=e[1].length+"",J=e[2]?"Refreshing...":"Refresh",U=e[0]&&Mt(e);const V=[At,Et],K=[];function X(e,t){return 0===e[1].length?0:1}return P=X(e),z=K[P]=V[P](e),{c(){t=f("div"),n=f("div"),r=f("div"),o=f("iconify-icon"),s=b(),l=f("span"),c=p("Jobs ("),a=p(B),g=p(")"),v=b(),U&&U.c(),w=b(),$=f("div"),j=f("button"),S=f("iconify-icon"),C=p("\\n        Delete All"),T=b(),M=f("button"),E=f("iconify-icon"),D=b(),F=p(J),O=b(),z.c(),_(o,"icon","mdi:briefcase"),_(o,"class","text-status-info"),x(l,"class","font-bold text-status-info"),x(r,"class","flex items-center gap-2"),_(S,"icon","mdi:delete-sweep"),_(S,"class","text-sm"),j.disabled=L=0===e[1].length,x(j,"class","bg-terminal-bg-light border border-terminal-border text-status-error px-3 py-1 text-xs hover:bg-red-900/30 transition-colors flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed"),_(E,"icon",A=e[2]?"mdi:loading":"mdi:refresh"),_(E,"class","text-sm"),k(E,"animate-spin",e[2]),M.disabled=e[2],x(M,"class","bg-terminal-bg-light border border-terminal-border text-terminal-text px-3 py-1 text-xs hover:bg-gray-700 transition-colors flex items-center gap-1"),x($,"class","flex items-center gap-2"),x(n,"class","flex items-center justify-between py-2 border-b border-terminal-border")},m(i,m){u(i,t,m),d(t,n),d(n,r),d(r,o),d(r,s),d(r,l),d(l,c),d(l,a),d(l,g),d(r,v),U&&U.m(r,null),d(n,w),d(n,$),d($,j),d(j,S),d(j,C),d($,T),d($,M),d(M,E),d(M,D),d(M,F),d(t,O),K[P].m(t,null),N=!0,R||(I=[h(j,"click",e[4]),h(M,"click",e[3])],R=!0)},p(e,[n]){(!N||2&n)&&B!==(B=e[1].length+"")&&y(a,B),e[0]?U?U.p(e,n):(U=Mt(e),U.c(),U.m(r,null)):U&&(U.d(1),U=null),(!N||2&n&&L!==(L=0===e[1].length))&&(j.disabled=L),(!N||4&n&&A!==(A=e[2]?"mdi:loading":"mdi:refresh"))&&_(E,"icon",A),(!N||4&n)&&k(E,"animate-spin",e[2]),(!N||4&n)&&J!==(J=e[2]?"Refreshing...":"Refresh")&&y(F,J),(!N||4&n)&&(M.disabled=e[2]);let i=P;P=X(e),P===i?K[P].p(e,n):(W(),q(K[i],1,1,()=>{K[i]=null}),G(),z=K[P],z?z.p(e,n):(z=K[P]=V[P](e),z.c()),H(z,1),z.m(t,null))},i(e){N||(H(z),N=!0)},o(e){q(z),N=!1},d(e){e&&m(t),U&&U.d(),K[P].d(),R=!1,i(I)}}}const Ot=e=>"processing"===e.status||"uploaded"===e.status||"awaiting_upload"===e.status;function Pt(e,t,n){let i,r;c(e,le,e=>n(1,r=e));let o=!1,s=null;var a;function d(){s||n(5,s=setInterval(async()=>{if(i)try{await we()}catch(e){console.error("Auto-refresh failed:",e)}},3e3))}function u(){s&&(clearInterval(s),n(5,s=null))}return T(()=>{d()}),a=()=>{u()},L().$$.on_destroy.push(a),e.$$.update=()=>{2&e.$$.dirty&&n(0,i=r.some(e=>"processing"===e.status||"uploaded"===e.status||"awaiting_upload"===e.status)),33&e.$$.dirty&&(i?d():!i&&s&&setTimeout(()=>{i||u()},1e4))},[i,r,o,async function(){n(2,o=!0);try{await we(),setTimeout(()=>n(2,o=!1),1500)}catch(e){console.error("Refresh failed:",e),n(2,o=!1)}},async function(){if(confirm("Are you sure you want to delete all jobs? This action cannot be undone."))try{await async function(){const e=l(le);if(0===e.length)return;oe.info("delete","Starting delete all jobs operation",{total_jobs:e.length});const t=e.filter(e=>"streaming"===e.processing_method),n=e.filter(e=>"streaming"!==e.processing_method);if(le.set([]),t.length>0&&(oe.info("delete","Deleting streaming jobs from server (background)",{count:t.length}),t.forEach(e=>{fetch("/delete-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e.job_id})}).catch(t=>{oe.debug("Background streaming job deletion failed (expected for local-only jobs)",{job_id:e.job_id,error:t.message})})})),n.length>0){oe.info("delete","Deleting server jobs",{count:n.length});const e=n.map(e=>fetch("/delete-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({job_id:e.job_id})}).catch(t=>(oe.error("Failed to delete server job",t,{job_id:e.job_id}),null)));await Promise.allSettled(e)}oe.complete("Delete all jobs completed",{streaming_jobs:t.length,server_jobs:n.length,total:e.length})}(),console.log("All jobs deleted from API.")}catch(e){console.error("Failed to delete all jobs:",e)}},s]}class zt extends te{constructor(e){super(),ee(this,e,Pt,Ft,o,{})}}function Nt(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="text-xs text-terminal-text-dim">Groq Whisper XL - Universal Audio Transcription Tool</div>',x(n,"class","border border-terminal-border mt-4 p-3 bg-terminal-bg-light text-center")},m(e,t){u(e,n,t)},p:e,i:e,o:e,d(e){e&&m(n)}}}class Rt extends te{constructor(e){super(),ee(this,e,null,Nt,o,{})}}function It(t){let n,i,r,o,s,l,c,a,p;return i=new ve({}),o=new tt({}),l=new zt({}),a=new Rt({}),{c(){n=f("main"),X(i.$$.fragment),r=b(),X(o.$$.fragment),s=b(),X(l.$$.fragment),c=b(),X(a.$$.fragment),x(n,"class","max-w-6xl mx-auto p-5")},m(e,t){u(e,n,t),Q(i,n,null),d(n,r),Q(o,n,null),d(n,s),Q(l,n,null),d(n,c),Q(a,n,null),p=!0},p:e,i(e){p||(H(i.$$.fragment,e),H(o.$$.fragment,e),H(l.$$.fragment,e),H(a.$$.fragment,e),p=!0)},o(e){q(i.$$.fragment,e),q(o.$$.fragment,e),q(l.$$.fragment,e),q(a.$$.fragment,e),p=!1},d(e){e&&m(n),Y(i),Y(o),Y(l),Y(a)}}}function Bt(e){return T(()=>{we()}),[]}return new class extends te{constructor(e){super(),ee(this,e,Bt,It,o,{})}}({target:document.getElementById("app")})}();
`
};
